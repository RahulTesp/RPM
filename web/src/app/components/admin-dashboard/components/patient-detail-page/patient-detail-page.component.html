<ng-container *ngIf="loading || loading_two || loading3 || loading4">
  <div class="overlay"></div>
  <mat-progress-spinner [mode]="'indeterminate'"></mat-progress-spinner>
</ng-container>
<div class="container_panel">
  <div class="main_panel">
    <div class="main-content-panel01" >
      <div class="main_page_upper_panel">
        <div class="page-header">
          <div class="page-header-panel">
            <div class="title_panel">
              <div
                class="back_arrow_container"
                id="backPatientList"
                (click)="backtopatientlist()"
              >
                <img
                  class="arrow-img"
                  src="../../../../../assets/04-Icons/Icons_Arrow - Back.svg"
                />
              </div>
              <p class="page_title">
                Patients /
                {{
                  http_rpm_patientList &&
                    http_rpm_patientList["PatientDetails"].FirstName
                }}
              </p>
            </div>

            <div *ngIf="variable == 1">
              <div class="downloadreport_panel">
                <div class="add_new_program"></div>

                <button
                  class="btn-download"
                  id="downloadReport"
                  (click)="downloadReport()"
                  color="primary"
                  [class.spinner]="DownloadStatus"
                  [disabled]="DownloadStatus"
                >
                  DOWNLOAD REPORT
                </button>
              </div>
            </div>
          </div>
          <div class="call_container" *ngIf="callVariable">
            <ng-container *ngTemplateOutlet="callpanel"></ng-container>
          </div>
        </div>
      </div>
      <div class="main_page_lower_panel">
        <div class="profile_container" *ngIf="smallScreenVariable">
          <!-- Profile Container Start -->
          <div class="patient_info_panel">
            <div class="upper_container">
              <div
                *ngIf="
                  http_rpm_patientList &&
                  http_rpm_patientList['PatientProgramdetails'].Status !=
                    'Discharged'
                "
                class="editIconCont"
              >
                <img
                  class="editIcon"
                  id="pd_editPatient"
                  (click)="editpatient()"
                  src="../../../../../assets/04-Icons/Icons_Edit A.svg"
                />
              </div>
              <div
                class="renewCont"
                *ngIf="
                  http_rpm_patientList &&
                  http_rpm_patientList['PatientDetails'].Status ==
                    'Discharged' &&
                  http_rpm_patientList &&
                  http_rpm_patientList['PatientProgramdetails'].Status ==
                    'Discharged' &&
                  ActiveProgram &&
                  ActiveProgram.IsActive == true
                "
              >
                <button
                  class="btn-download-renew"
                  id="pd_renew"
                  style="position: relative; z-index: 200"
                  type="button"
                  (click)="getrenewProgram()"
                >
                  Renew
                </button>
              </div>
              <div
                *ngIf="http_rpm_patientList"
                class="img_container mat-card-avatar"
              >
                <img
                  class="profileimg"
                  src="{{
                    http_rpm_patientList &&
                      http_rpm_patientList.PatientDetails.Picture
                  }}"
                />
                <span
                  class="status_display"
                  [ngClass]="{
                    patient_active: patientStatusData == 'Active',
                    patient_prescribed:
                      patientStatusData == 'Prescribed' ||
                      patientStatusData == 'Enrolled',
                    patient_discharge:
                      patientStatusData == 'Discharged' ||
                      patientStatusData == 'ReadyToDischarge',
                    patient_onhold: patientStatusData == 'OnHold',
                    patient_inActive: patientStatusData == 'InActive'
                  }"
                  >{{ patientStatusData }}
                </span>
              </div>

              <div
                *ngIf="http_rpm_patientList"
                class="patient_detail_container"
              >
                <p class="patient_name">
                  {{
                    http_rpm_patientList &&
                      http_rpm_patientList["PatientDetails"].FirstName
                  }}
                  {{ http_rpm_patientList["PatientDetails"].LastName }}
                </p>
                <p class="patient_id">
                  Patient ID:
                  {{
                    http_rpm_patientList &&
                      http_rpm_patientList.PatientDetails.UserName
                  }}
                </p>
                <div class="patient_profile_data_cont">
                  <p class="patient_data">
                    {{
                      http_rpm_patientList &&
                        http_rpm_patientList["PatientDetails"].DOB
                        | date : "MMM d, y"
                    }}({{
                      getAge(
                        http_rpm_patientList &&
                          http_rpm_patientList["PatientDetails"].DOB
                      )
                    }}
                    Years)
                  </p>
                  <p
                    *ngIf="patient_city && patient_city.length > 0"
                    class="patient_data"
                  >
                    {{ patient_city && patient_city[0].CityName }},
                    {{
                      http_rpm_patientList &&
                        http_rpm_patientList.PatientDetails.State
                    }}
                  </p>
                </div>
              </div>

              <p class="current_time">Time: {{ ptime }} {{ tz }}</p>

              <div class="patient_communication_container">
                <div
                  *ngIf="
                    http_rpm_patientList &&
                    http_rpm_patientList['PatientProgramdetails'].Status !=
                      'Discharged'
                  "
                >
                  <div class="device_icon" [class.isDisabled]="videoOnVariable">
                    <img
                      class="device_img"
                      src="../../../../../assets/04-Icons/Icons_Phone A.svg"
                      id="pd_Call"
                      (click)="makeCallReady()"
                    />
                  </div>
                </div>
                <div
                  *ngIf="
                    http_rpm_patientList &&
                    http_rpm_patientList['PatientProgramdetails'].Status !=
                      'Discharged'
                  "
                >
                  <div
                    class="device_icon"
                    [class.isDisabled]="videoOnVariable || callVariable"
                  >
                    <img
                      class="device_img"
                      src="../../../../../assets/04-Icons/Icons_Video A.svg"
                      (click)="getVideoconnection(false)"
                    />
                    
                  </div>
                </div>

                <div
                  *ngIf="
                    http_rpm_patientList &&
                    http_rpm_patientList['PatientProgramdetails'].Status !=
                      'Discharged'
                  "
                >
                  <div class="device_icon">
                    <span *ngIf="unreadCount > 0" class="unread-message">{{
                      unreadCount
                    }}</span>
                    <img
                      class="device_img"
                      src="../../../../../assets/04-Icons/Icons_Chat A.svg"
                      (click)="openChatPanel()"
                    />
                     
                  </div>
                </div>
                <div
                  *ngIf="
                    http_rpm_patientList &&
                    http_rpm_patientList['PatientProgramdetails'].Status !=
                      'Discharged'
                  "
                >
                  <div class="device_icon">
                    <img
                      class="device_img"
                      src="../../../../../assets/04-Icons/Icons_SMS A.svg"
                      id="pd_SMS"
                      (click)="openDialogWithTemplateRef()"
                    />
                  </div>
                </div>
              </div>
            </div>

            <select
              class="plan_data"
              id="pd_programHistory"
              [(ngModel)]="CurrentProgramSelected"
              [ngModelOptions]="{ standalone: true }"
              (ngModelChange)="onProgramHstoryChange($event)"
            >
              <option
                *ngFor="let data of ProgramHistory; let i = index"
                [ngValue]="data.PatientProgramId"
              >
                <span>
                  {{ data.ProgramName }}
                </span>
                <span class="activeStatusStyle">
                  {{ convertToLocalTime(data.StartDate) | date : "mediumDate" }}
                </span>
              </option>
            </select>
            <div class="time_container">
              <div class="time_panel">
                {{ PageTimer }}
              </div>
            </div>

            <div class="bottom_container">
              <div class="billing_refresh">
                <p>Interaction Time from Last Billing</p>

                <span class="refresh" (click)="billingReload()"
                  ><img
                    class="refreshIcon"
                    src="../../../../../assets/refresh.png"
                /></span>
              </div>

              <section
                class="progrssbar_container">
                <!-- Custom Progress Bar -->
                <!-- <div class="custom-progress-bar-outer">
                  <div
                    class="progress-fill-data"
                    [style.width.%]="interactionpercentValue > 100 ? 100 : interactionpercentValue"
                  ></div>
                </div> -->
                  <div class="custom-progress-bar-outer">
                  <div
                    class="progress-fill-data"
                    [style.width.%]="patientInteractionMin > colorcodeval ? 100 : (interactionpercentValue > 100 ? 100 : interactionpercentValue)"
                    [ngClass]="patientInteractionMin > colorcodeval ? 'completed-target-data' : ''"
                  ></div>
                </div>


                <!-- Time display -->
                <div *ngIf="interactionpercentValue > 100" class="progressvalue">
                  {{ patientInteractionMin }}:{{ patientInteractionSec }}
                </div>

                <div *ngIf="interactionpercentValue <= 100" class="progressvalue">
                  {{ patientInteractionMin }}:{{ patientInteractionSec }} /
                  {{ totalInteractionTime }} min
                </div>
              </section>
              <div class="faq_form">
                <button
                  class="btn_reset"
                  id="pd_resetPassword"
                  (click)="resetPassword()"
                  *ngIf="unlockAccountStatus != true"
                >
                  Reset Password
                </button>
                <button
                  class="btn_reset"
                  id="pd_resetPassword"
                  (click)="UnlockAccount()"
                  *ngIf="unlockAccountStatus == true"
                >
                  Unlock Account
                </button>
                <button
                  class="btn_reset"
                  id="pd_NewProgram"
                  *ngIf="
                    http_rpm_patientList &&
                    http_rpm_patientList['PatientProgramdetails'].Status ==
                      'Discharged' &&
                    http_rpm_patientList &&
                    http_rpm_patientList['PatientDetails'].Status ==
                      'Discharged' &&
                    ActiveProgram &&
                    ActiveProgram.IsActive == true
                  "
                  (click)="addnewProgam()"
                >
                  New Program
                </button>
              </div>
            </div>
          </div>
          <!-- Profile Container End-->
        </div>
        <!-- Central Panel Start -->
        <!-- class ="centeral_panel" -->

        <div class="middle_panel">
          <div class="uppermenubtnpanel">
            <div *ngFor="let item of menu">
              <button
                class="uppermenubtn_detail"
                (click)="ChangeScreen(item.menu_id)"
                id="pd_changeScreen"
                [class.selected]="CurrentMenu == item.menu_id"
                style="z-index: 200; position: relative"
              >
                {{ item.menu_title }}
              </button>
            </div>
          </div>
          <div class="panel_layout_container">
            <div class="panel_render_container">
              <ng-container [ngSwitch]="variable">
                <ng-container *ngSwitchCase="1">
                  <ng-container *ngTemplateOutlet="summaryInfo"></ng-container>
                </ng-container>
                <ng-container *ngSwitchCase="2">
                  <ng-container *ngTemplateOutlet="patientInfo"></ng-container>
                </ng-container>
                <ng-container *ngSwitchCase="3">
                  <ng-container *ngTemplateOutlet="programInfo"></ng-container>
                </ng-container>
                <ng-container *ngSwitchCase="4">
                  <ng-container *ngTemplateOutlet="clinicInfo"></ng-container>
                </ng-container>
                <ng-container *ngSwitchCase="5">
                  <ng-container *ngTemplateOutlet="activityInfo"></ng-container>
                </ng-container>
                <ng-container *ngSwitchDefault>
                  <ng-container *ngTemplateOutlet="summaryInfo"></ng-container>
                </ng-container>
              </ng-container>


            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="side-content-panel" [ngStyle]="{ width: '2.5%' }">
      <div class="menu_container">
        <div>
          <ng-container>
            <app-side-panel-patient
              [symptom_update_variable]="symptom_update_variable"
              [activityMenuVariable]="activityMenuVariable"
              (patientDetailSubMenuChange)="
                activityInfoMenuSelect(activityMenuVariable)
              "
              (SymptomTablereload)="getSymptomsReloadData()"
              (MedicationTablereload)="getMedicationReload()"
              (reviewTableReload)="getReviewDataReload()"
              (TaskTablereload)="getTaskAlertDataReload()"
              (openTaskTablereload)="getOpenTaskDataReload()"
              (ScheduleTablereload)="getScheduleDataReload()"
              (ResetReviewTimer)="resetReviewTimer()"
              (billingInfoReload)="billingReload()"
            ></app-side-panel-patient>
          </ng-container>
        </div>
        <div class="chat_container" *ngIf="chatVariable && !callVariable">
          <ng-container *ngTemplateOutlet="chat"></ng-container>
        </div>
        <div *ngIf="callVariable || videoOnVariable">
          <ng-container *ngTemplateOutlet="notetemplate"></ng-container>
        </div>
        <!-- <div *ngIf="symtoms_update_panel">
          <ng-container *ngTemplateOutlet="symptomupdate"></ng-container>
         class="call_note_panel"

        </div> -->
        <div *ngIf="notes_update_panel">
          <ng-container *ngTemplateOutlet="noteupdatetemplate"></ng-container>
        </div>
      </div>
    </div>

 <div
     class="CallVideoMainPanel"
       [ngStyle]="
         videoOnVariable ? { display: 'block' } : { display: 'none' }
          "
            >
           <div id="mydiv" class="myvideoContainer" cdkDrag  style="position: absolute; top: 0px; left: 0px;">
            <div>
            <!-- <img
      class="tool_icon tool_icon_close"
      style="cursor: pointer; float: right"
      src="../../../../../assets/04-Icons/Icons_Cancel.svg"
      (click)="disconnectVideo()"
    /> -->
  </div>
  <div class="upper_toolPanel">
    <div class="timerPanel">{{ videoTimer }}</div>
    <div class="video-call-status">
      <div
     class="video_not_conntected"
     *ngIf="
       twilioService &&
       twilioService.videoConnected == false &&
       twilioService.dialing == false
     "
   >
     Call Not Connected
   </div>
   <div
     class="video_not_conntected"
     *ngIf="twilioService && twilioService.dialing == true"
   >
     Dialing ......
   </div>
   </div>
    <div class="icon_panel">
      <div class="tool_icon_panel">
        <img
          *ngIf="twilioService.microphone"
          class="tool_icon"
          style="cursor: pointer"
          src="../../../../../assets/04-Icons/Icons_Mic.svg"
          (click)="mute()"
        />
        <img
          *ngIf="!twilioService.microphone"
          class="tool_icon"
          style="cursor: pointer"
          src="../../../../../assets/04-Icons/Icons_Mic End.svg"
          (click)="unmute()"
        />
      </div>

      <div
        class="tool_icon_panel"
        *ngIf="twilioService.isVideoOn"
      >
        <img
          class="tool_icon"
          style="cursor: pointer"
          src="../../../../../assets/04-Icons/Icons_Video.svg"
          (click)="disableVideo()"
        />
      </div>
      <div
        *ngIf="!twilioService.isVideoOn"
        class="tool_icon_panel"
        style="background-color: #ffffff"
      >
        <img
          class="tool_icon_video"
          style="cursor: pointer"
          src="../../../../../assets/04-Icons/Icons_Video End.svg"
          (click)="enableVideo()"
        />
      </div>

      <div
        class="videocallend"
        (click)="disconnect()"
        style="cursor: pointer"
        *ngIf="twilioService && twilioService.roomObj"
      >
        <img
          class="tool_icon_video"
          src="../../../../../assets/04-Icons/Icons_Phone End.svg"
          (click)="getVideoconnection(true)"
        />
      </div>


      <div
        class="videocallend"
        *ngIf="twilioService && twilioService.roomObj == null"
        (click)="VideoRedial(true)"
        [ngClass]="{
          isDisabled:
            twilioService && twilioService.dialing == true
        }"
        style="
          cursor: pointer;
          position: relative;
          z-index: 200;
        "
      >
        <img
          class="tool_icon_video"
          style="cursor: pointer; float: right"
          src="../../../../../assets/04-Icons/Icons_Phone.svg"
        />
      </div>
    </div>
  </div>

  <div class="videosubPanel">



    <div id="local" class="localvideo" #localVideo></div>
    <div id="remote" #remoteVideo class="remotevideo"></div>
  </div>
</div>
</div>

  </div>
</div>

<ng-template #notetemplate>
  <div
    class="common_template note_template"
    [ngStyle]="toogle ? minimize : maximize"
  >
    <img
      *ngIf="minimizeValue"
      class="maximizebutton"
      id="pd_maxNote"
      (click)="maximizeScreen()"
      src="../../../../../assets/04-Icons/Icons_Expand.svg"
    />
    <img
      *ngIf="!minimizeValue"
      class="minimizebutton"
      id="pd_minNote"
      (click)="minimizeScreen()"
      src="../../../../../assets/04-Icons/Icons_Minimize.svg"
    />

    <form>
      <div class="common_main_title">Add Notes</div>

      <div class="common_template_content">
        <div class="note_dropdown common_content">
          <p class="common_content_title">Note Type</p>

          <select
            class="common_input_dropdown"
            placeholder="Select Category"
            id="pd_noteType"
            required
            id="noteId"
            name="noteId"
            #noteId="ngModel"
            [(ngModel)]="NoteTypeId"
            [ngModelOptions]="{ standalone: true }"
            [disabled]="
              (!isManagerProvider && !callVariable) || incomingCallVal == true
            "
          >
            <option [value]="undefined">Select Category</option>

            <option
              *ngFor="let data of noteTypeIdArray; let i = index"
              [value]="data.Id"
            >
              {{ data.Name }}
            </option>
          </select>
          <div class="warn">
            <ng-container *ngIf="noteId?.invalid && noteId?.touched">
              Schedule Type is required.
            </ng-container>
          </div>
        </div>
        <div class="call_connect_panel common_content">
          <div class="establish_sub_content">
            <p class="common_content_title content_titl-radio">
              Non-Established Call
            </p>
            <div [class.establishdisable]="incomingCallVal == true">
              <input
                class="isestablished"
                type="radio"
                id="1"
                name="sample"
                [value]="false"
                (change)="onestablishedChange($event)"
                [(ngModel)]="establishedValue"
              />
            </div>
          </div>
          <div class="establish_sub_content">
            <p class="common_content_title content_titl-radio">
              Established Call
            </p>
            <input
              class="isestablished"
              type="radio"
              id="b"
              name="sample"
              [value]="true"
              (change)="onestablishedChange($event)"
              [(ngModel)]="establishedValue"
            />
          </div>
        </div>
        <p class="common_content_title">With/Intended With</p>

        <div class="call_connect_panel common_content">
          <div class="establish_sub_content">
            <p class="common_content_title content_titl-radio">Patient</p>
            <input
              class="isestablished"
              type="radio"
              id="1"
              name="Caregiver"
              [value]="false"
              (change)="onCareGiverChange($event)"
              [(ngModel)]="caregiver"
            />
          </div>

          <div class="establish_sub_content">
            <p class="common_content_title content_titl-radio">Caregiver</p>

            <input
              input
              class="isestablished"
              type="radio"
              id="2"
              name="Caregiver"
              [value]="true"
              (change)="onCareGiverChange($event)"
              [(ngModel)]="caregiver"
            />
          </div>
        </div>

        <div
          class="questionpanel"
          *ngFor="
            let note of QuestionArrayBase;
            let i = index;
            let first = first
          "
        >
          <div
            *ngIf="
              note.AnswerTypes &&
              note.AnswerTypes.length > 0 &&
              note.Question != 'Readings Summary Report'
            "
          >
            <details>
              <summary class="common_content_title common_content_data_title">
                {{ note.Question }}
              </summary>
              <div class="answer_panel" *ngIf="note.AnswerTypes.length > 0">
                <div
                  *ngFor="
                    let ans of note.AnswerTypes;
                    let i = index;
                    let first = first
                  "
                >
                  <div class="answer_sub">
                    <input
                      class="answer_check"
                      id="pd_note1"
                      type="checkbox"
                      [(ngModel)]="ans.Checked"
                      [ngModelOptions]="{ standalone: true }"
                    />
                    <p class="answer_descr">{{ ans.Answer }}</p>
                  </div>
                </div>
                <div>
                  <textarea
                    class="extra_note_data"
                    id="pd_note1Extra"
                    [(ngModel)]="note.Notes"
                    [ngModelOptions]="{ standalone: true }"
                  ></textarea>
                </div>
              </div>
            </details>
          </div>

          <!-- Sub Question Start -->
          <div
            *ngIf="
              note.SubQuestions.length > 0 &&
              note.Question != 'Readings Summary Report'
            "
          >
            <details>
              <summary class="common_content_title common_content_data_title">
                {{ note.Question }}
              </summary>
              <div
                class="Sub_question_panel"
                *ngIf="note.SubQuestions.length > 0"
              >
                <div
                  *ngFor="
                    let question of note.SubQuestions;
                    let i = index;
                    let first = first
                  "
                >
                  <details [open]="first ? true : false">
                    <summary
                      class="common_content_title common_content_data_title"
                    >
                      {{ question.Question }}
                    </summary>
                    <div class="answer_panel">
                      <div
                        *ngFor="
                          let ans of question.AnswerTypes;
                          let i = index;
                          let first = first
                        "
                      >
                        <div class="answer_sub">
                          <input
                            class="answer_check"
                            type="checkbox"
                            id="pd_note2"
                            [(ngModel)]="ans.Checked"
                            [ngModelOptions]="{ standalone: true }"
                          />
                          <p class="answer_descr">{{ ans.Answer }}</p>
                        </div>
                      </div>
                      <div>
                        <textarea
                          class="extra_note_data"
                          [(ngModel)]="question.Notes"
                          id="pd_note2Extra"
                          [ngModelOptions]="{ standalone: true }"
                        ></textarea>
                      </div>
                    </div>
                  </details>
                </div>
              </div>
            </details>
          </div>
          <!-- Sub Question End -->

          <div *ngIf="note.Question == 'Readings Summary Report'">
            <details>
              <summary class="common_content_title common_content_data_title">
                {{ note.Question }}
              </summary>
              <div class="answer_panel" *ngIf="note.AnswerTypes.length > 0">
                <p class="vital_descr">{{ this.vitals[0].Vital }}</p>

                <div
                  *ngFor="
                    let ans of note.AnswerTypes;
                    let i = index;
                    let first = first
                  "
                >
                  <div class="answer_sub">
                    <input
                      class="answer_check"
                      type="checkbox"
                      id="{{ i }}"
                      [(ngModel)]="ans.Checked"
                      [checked]="ans.Checked"
                      [name]="note.Question"
                      [value]="ans.AnswerId"
                      (click)="isAllSelected($event)"
                      [ngModelOptions]="{ standalone: true }"
                    />

                    <p class="answer_descr">{{ ans.Answer }}</p>
                  </div>
                </div>
                <div>
                  <textarea
                    class="extra_note_data"
                    [(ngModel)]="note.Notes"
                    [ngModelOptions]="{ standalone: true }"
                  ></textarea>
                </div>
              </div>
            </details>
          </div>
        </div>

        <!-- Test Note template end -->

        <p class="common_content_title">Additional Notes</p>
        <div>
          <textarea
            [(ngModel)]="additionaNotes"
            id="pd_additionalNote"
            [ngModelOptions]="{ standalone: true }"
          ></textarea>
        </div>
      </div>
      <!-- <div class="lower_container">
        <div>
          <button class="btn_note" class="btn_cancel" (mousedown)="OnCancelNotes()">CANCEL</button>
        </div>
        <div>
          <button class="btn_note"  class="btn_save" (click)="getDataforquestions()">SUMMARY</button>


        </div>
      </div> -->

      <div *ngIf="QuestionArrayBase.length > 0" class="lower_container">
        <div>
          <button
            class="btn_note"
            class="btn_cancel"
            id="pd_cancelNote1"
            (mousedown)="OnCancelNotes()"
          >
            CANCEL
          </button>
        </div>
        <div>
          <button
            class="btn_note"
            class="btn_save"
            id="pd_noteSummary"
            (click)="getDataforquestions()"
          >
            SUMMARY
          </button>
        </div>
      </div>

      <div *ngIf="QuestionArrayBase.length == 0" class="lower_container">
        <div>
          <button
            class="btn_cancel"
            id="pd_cancelNote2"
            (click)="OnCancelNotes()"
            [mat-dialog-close]="true"
          >
            CANCEL
          </button>
        </div>
        <div>
          <button
            class="btn_save"
            mat-raised-button
            id="pd_confirmNote"
            [class.spinner]="loading_note"
            [disabled]="loading_note"
            (click)="previewConfirm()"
          >
            CONFIRM
          </button>
        </div>
      </div>
    </form>
  </div>
</ng-template>

<ng-template #noteupdatetemplate>
  <div class="common_template update_note_template">
    <form>
      <div class="common_main_title">Update Note</div>

      <div class="common_template_content">
        <div class="note_dropdown common_content">
          <p class="common_content_title">Note Type</p>

          <select
            class="common_input_dropdown"
            placeholder="Select Category"
            id="pd_updateNoteType"
            required
            name="noteId"
            #noteId="ngModel"
            [(ngModel)]="NoteTypeId"
            [ngModelOptions]="{ standalone: true }"
            [disabled]="
              (!isManagerProvider && !callVariable) || incomingStatus == true
            "
          >
            <option [value]="undefined">Select Category</option>

            <option
              *ngFor="let data of noteTypeIdArray; let i = index"
              [value]="data.Id"
            >
              {{ data.Name }}
            </option>
          </select>
          <div class="warn">
            <ng-container *ngIf="noteId?.invalid && noteId?.touched">
              Schedule Type is required.
            </ng-container>
          </div>
        </div>
        <div class="call_connect_panel common_content">
          <div class="establish_sub_content">
            <p class="common_content_title content_titl-radio">
              Non-Established Call
            </p>
            <div [class.establishdisable]="incomingStatus == true">
              <input
                class="isestablished"
                type="radio"
                id="1"
                name="sample"
                [value]="false"
                (change)="onestablishedChange($event)"
                [(ngModel)]="establishedValue"
              />
            </div>

            <!-- <input  type="radio" value="0"  [checked]="iscallestablished" (change)="iscallestablished = !iscallestablished"> -->
          </div>
          <div class="establish_sub_content">
            <p class="common_content_title content_titl-radio">
              Established Call
            </p>
            <input
              class="isestablished"
              type="radio"
              id="b"
              name="sample"
              [value]="true"
              (change)="onestablishedChange($event)"
              [(ngModel)]="establishedValue"
            />
            <!-- <input class="isestablished" type="radio" value="1" [checked]="iscallestablished" (change)="iscallestablished = !iscallestablished"> -->
          </div>
        </div>
        <p class="common_content_title">With/Intended With</p>

        <div class="call_connect_panel common_content">
          <div class="establish_sub_content">
            <p class="common_content_title content_titl-radio">Patient</p>
            <input
              class="isestablished"
              type="radio"
              id="1"
              name="Caregiver"
              [value]="false"
              (change)="onCareGiverChange($event)"
              [(ngModel)]="caregiver"
            />
          </div>

          <div class="establish_sub_content">
            <p class="common_content_title content_titl-radio">Caregiver</p>

            <input
              input
              class="isestablished"
              type="radio"
              id="2"
              name="Caregiver"
              [value]="true"
              (change)="onCareGiverChange($event)"
              [(ngModel)]="caregiver"
            />
          </div>
        </div>
        <div class="common_content">
          <p class="common_content_title">Time</p>

          <input
            class="common_input_dropdown"
            id="pd_noteTime"
            type="text"
            step="1"
            min="00:00:00"
            max="24:00:00"
            placeholder="Select Time"
            [(ngModel)]="NoteTime"
            [ngModelOptions]="{ standalone: true }"
            [disabled]="true"
          />
          <div class="warn">
            <ng-container *ngIf="NoteTime == undefined"
              >Note Time is required
            </ng-container>
          </div>
        </div>

        <div
          class="questionpanel"
          *ngFor="
            let note of QuestionArrayBase;
            let i = index;
            let first = first
          "
        >
          <div
            *ngIf="
              note.AnswerTypes &&
              note.AnswerTypes.length > 0 &&
              note.Question != 'Readings Summary Report'
            "
          >
            <details>
              <summary class="common_content_title common_content_data_title">
                {{ note.Question }}
              </summary>
              <div class="answer_panel" *ngIf="note.AnswerTypes.length > 0">
                <div
                  *ngFor="
                    let ans of note.AnswerTypes;
                    let i = index;
                    let first = first
                  "
                >
                  <div class="answer_sub">
                    <input
                      class="answer_check"
                      type="checkbox"
                      id="pd_updateNote1"
                      [(ngModel)]="ans.Checked"
                      [ngModelOptions]="{ standalone: true }"
                    />
                    <p class="answer_descr">{{ ans.Answer }}</p>
                  </div>
                </div>
                <div>
                  <textarea
                    class="extra_note_data"
                    id="pd_updateNote1Extra"
                    [(ngModel)]="note.Notes"
                    [ngModelOptions]="{ standalone: true }"
                  ></textarea>
                </div>
              </div>
            </details>
          </div>

          <!-- Sub Question Start -->
          <div
            *ngIf="
              note.SubQuestions.length > 0 &&
              note.Question != 'Readings Summary Report'
            "
          >
            <details>
              <summary class="common_content_title common_content_data_title">
                {{ note.Question }}
              </summary>
              <div
                class="Sub_question_panel"
                *ngIf="note.SubQuestions.length > 0"
              >
                <div
                  *ngFor="
                    let question of note.SubQuestions;
                    let i = index;
                    let first = first
                  "
                >
                  <details [open]="first ? true : false">
                    <summary
                      class="common_content_title common_content_data_title"
                    >
                      {{ question.Question }}
                    </summary>
                    <div class="answer_panel">
                      <div
                        *ngFor="
                          let ans of question.AnswerTypes;
                          let i = index;
                          let first = first
                        "
                      >
                        <div class="answer_sub">
                          <input
                            class="answer_check"
                            type="checkbox"
                            id="pd_updateNote2"
                            [(ngModel)]="ans.Checked"
                            [ngModelOptions]="{ standalone: true }"
                          />
                          <p class="answer_descr">{{ ans.Answer }}</p>
                        </div>
                      </div>
                      <div>
                        <textarea
                          class="extra_note_data"
                          id="pd_updateNote2Extra"
                          [(ngModel)]="question.Notes"
                          [ngModelOptions]="{ standalone: true }"
                        ></textarea>
                      </div>
                    </div>
                  </details>
                </div>
              </div>
            </details>
          </div>
          <!-- Sub Question End -->

          <div *ngIf="note.Question == 'Readings Summary Report'">
            <details>
              <summary class="common_content_title common_content_data_title">
                {{ note.Question }}
              </summary>
              <div class="answer_panel" *ngIf="note.AnswerTypes.length > 0">
                <p class="vital_descr">{{ this.vitals[0].Vital }}</p>

                <div
                  *ngFor="
                    let ans of note.AnswerTypes;
                    let i = index;
                    let first = first
                  "
                >
                  <div class="answer_sub">
                    <input
                      class="answer_check"
                      type="checkbox"
                      id="{{ i }}"
                      [(ngModel)]="ans.Checked"
                      [checked]="ans.Checked"
                      [name]="note.Question"
                      [value]="ans.AnswerId"
                      (click)="isAllSelected($event)"
                      [ngModelOptions]="{ standalone: true }"
                    />

                    <p class="answer_descr">{{ ans.Answer }}</p>
                  </div>
                </div>
                <div>
                  <textarea
                    class="extra_note_data"
                    [(ngModel)]="note.Notes"
                    [ngModelOptions]="{ standalone: true }"
                  ></textarea>
                </div>
              </div>
            </details>
          </div>
        </div>

        <!-- Test Note template end -->

        <p class="common_content_title">Additional Notes</p>
        <div>
          <textarea
            [(ngModel)]="additionaNotes"
            id="pd_updateAdditionalNote"
            [ngModelOptions]="{ standalone: true }"
          ></textarea>
        </div>
      </div>
      <!-- <div class="lower_container">
        <div>
          <button class="btn_note" class="btn_cancel" (mousedown)="OnpreviewUpdateCancel()">CANCEL</button>
        </div>
        <div>
          <button class="btn_note"  class="btn_save" (click)="getCallDataupdatePreview()">SUMMARY</button>


        </div>
      </div> -->

      <div *ngIf="QuestionArrayBase.length > 0" class="lower_container">
        <div>
          <button
            class="btn_note"
            class="btn_cancel"
            id="pd_updateNoteCancel1"
            (mousedown)="OnpreviewUpdateCancel()"
          >
            CANCEL
          </button>
        </div>
        <div>
          <button
            class="btn_note"
            class="btn_save"
            id="pd_updateNoteSummary"
            (click)="getCallDataupdatePreview()"
          >
            SUMMARY
          </button>
        </div>
      </div>

      <div *ngIf="QuestionArrayBase.length == 0" class="lower_container">
        <div>
          <button
            class="btn_cancel"
            id="pd_updateNoteCancel2"
            (click)="OnpreviewUpdateCancel()"
            [mat-dialog-close]="true"
          >
            CANCEL
          </button>
        </div>
        <div
          *ngIf="
            http_rpm_patientList &&
            http_rpm_patientList['PatientDetails'].Status != 'Discharged'
          "
        >
          <button
            class="btn_save"
            mat-raised-button
            id="pd_updateNoteConfirm"
            [class.spinner]="loading_note"
            [disabled]="loading_note"
            (click)="previewUpdateConfirm()"
          >
            CONFIRM
          </button>
        </div>
      </div>
    </form>
  </div>
</ng-template>

<ng-template #callpanel>
  <div class="callpanel">
    <div class="call_leftpanel">
      <div class="call_counter">
        <p>{{ calltimer }}</p>
      </div>
    </div>
    <div class="call_centerpanel">
      <div class="callIcon_panel">
        <div class="callIcon_phone" *ngIf="!incomingCallVal">
          <img
            class="phoneIcon"
            id="pd_callConnect"
            (click)="makeCallConnected()"
            [src]="
              call_connected
                ? '../../../../../assets/04-Icons/Icons_Phone End.svg'
                : '../../../../../assets/04-Icons/Icons_Phone.svg'
            "
          />
        </div>

        <div class="selectNumber" *ngIf="!incomingCallVal">
          <select
            [(ngModel)]="phoneno"
            name="contactnumber"
            id="pd_contactNumber"
          >
            <option
              [value]="
                http_rpm_patientList &&
                http_rpm_patientList.PatientDetails.MobileNo
              "
            >
              {{
                http_rpm_patientList &&
                  http_rpm_patientList.PatientDetails.MobileNo
              }}
            </option>
            <option
              [value]="
                http_rpm_patientList &&
                http_rpm_patientList.PatientDetails.AlternateMobNo
              "
            >
              {{
                http_rpm_patientList &&
                  http_rpm_patientList.PatientDetails.AlternateMobNo
              }}
            </option>
          </select>
        </div>
        <div *ngIf="!incomingVariableDisable">
          <button
            class="incomingButton"
            id="pd_IncomingCall"
            (click)="incomingCall()"
          >
            INCOMING
          </button>
        </div>
      </div>
    </div>
    <div class="call_rightpanel">
      <img
        class="call_close_icon"
        src="../../../../../assets/04-Icons/Icons_Cancel.svg"
      />
    </div>
  </div>
</ng-template>

<ng-template #chat>
  <app-chatbutton
    [currentuserName]="http_rpm_patientList.PatientDetails.UserName"
    (CloseChatPanlBlock)="CloseChatPanlBlock()"
    (unreadMessageUpdated)="updateUnreadCount($event)"
  ></app-chatbutton>
</ng-template>

<!-- Summary -->
<ng-template #summaryInfo>
  <div class="summaryInfo">
    <div class="profile_container_potrait">
      <!-- Profile Container Start -->
      <div class="patient_info_potrait">
        <div class="upper_container">
          <div
            *ngIf="
              http_rpm_patientList &&
              http_rpm_patientList['PatientProgramdetails'].Status !=
                'Discharged'
            "
            class="editIconCont"
          >
            <img
              class="editIcon"
              id="pd_editPatient"
              (click)="editpatient()"
              src="../../../../../assets/04-Icons/Icons_Edit A.svg"
            />
          </div>
          <div
            class="renewCont"
            *ngIf="
              http_rpm_patientList &&
              http_rpm_patientList['PatientDetails'].Status == 'Discharged' &&
              http_rpm_patientList &&
              http_rpm_patientList['PatientProgramdetails'].Status ==
                'Discharged' &&
              ActiveProgram &&
              ActiveProgram.IsActive == true
            "
          >
            <button
              class="btn-download-renew"
              style="position: relative; z-index: 200"
              type="button"
              id="pd_renew"
              (click)="getrenewProgram()"
            >
              Renew
            </button>
          </div>
          <div class="img_container mat-card-avatar">
            <img
              class="profileimg"
              src="{{
                http_rpm_patientList &&
                  http_rpm_patientList.PatientDetails.Picture
              }}"
            />
            <span
              class="status_display"
              [ngClass]="{
                patient_active: patientStatusData == 'Active',
                patient_prescribed:
                  patientStatusData == 'Prescribed' ||
                  patientStatusData == 'Enrolled',
                patient_discharge:
                  patientStatusData == 'Discharged' ||
                  patientStatusData == 'ReadyToDischarge',
                patient_onhold: patientStatusData == 'OnHold',
                patient_inActive: patientStatusData == 'InActive'
              }"
              >{{ patientStatusData }}
            </span>
          </div>

          <div *ngIf="http_rpm_patientList" class="patient_detail_container">
            <p class="patient_name">
              {{
                http_rpm_patientList &&
                  http_rpm_patientList["PatientDetails"].FirstName
              }}
              {{
                http_rpm_patientList &&
                  http_rpm_patientList["PatientDetails"].LastName
              }}
            </p>
            <p class="patient_id">
              Patient ID:
              {{
                http_rpm_patientList &&
                  http_rpm_patientList.PatientDetails.UserName
              }}
            </p>
            <div class="patient_profile_data_cont">
              <p class="patient_data">
                {{
                  http_rpm_patientList &&
                    http_rpm_patientList["PatientDetails"].DOB
                    | date : "MMM d, y"
                }}({{
                  getAge(
                    http_rpm_patientList &&
                      http_rpm_patientList["PatientDetails"].DOB
                  )
                }}
                Years)
              </p>
              <p
                *ngIf="patient_city && patient_city.length > 0"
                class="patient_data"
              >
                {{ patient_city && patient_city[0].CityName }},
                {{
                  http_rpm_patientList &&
                    http_rpm_patientList.PatientDetails.State
                }}
              </p>
            </div>
          </div>

          <p class="current_time">Time: {{ ptime }} {{ tz }}</p>

          <div class="faq_form_potrat">
            <button
              class="btn_reset"
              id="pd_resetPassword"
              *ngIf="unlockAccountStatus != true"
            >
              Reset Password
            </button>
            <button
              class="btn_reset"
              id="pd_resetPassword"
              (click)="UnlockAccount()"
              *ngIf="unlockAccountStatus == true"
            >
              Unlock Account
            </button>
            <!-- <button class="btn_faq">FAQ Form</button> -->
            <!-- <button class="btn_reset"  *ngIf="http_rpm_patientList&&http_rpm_patientList['PatientProgramdetails'].Status == 'Discharged' http_rpm_patientList&&http_rpm_patientList['PatientDetails'].Status == 'Discharged'" (click)="addnewProgam()">New Program</button> -->

            <button
              class="btn_reset"
              id="pd_NewProgram"
              *ngIf="
                http_rpm_patientList &&
                http_rpm_patientList['PatientProgramdetails'].Status ==
                  'Discharged' &&
                http_rpm_patientList &&
                http_rpm_patientList['PatientDetails'].Status == 'Discharged' &&
                ActiveProgram &&
                ActiveProgram.IsActive == true
              "
              (click)="addnewProgam()"
            >
              New Program
            </button>
            <!-- <button class="btn_discharge" id="pd_discharge"   *ngIf="http_rpm_patientList&&http_rpm_patientList['PatientProgramdetails'].Status == 'InActive'|| http_rpm_patientList&&http_rpm_patientList['PatientDetails'].Status == 'OnHold' " (click)="openDischrageDialog()">Discharge</button> -->
          </div>
        </div>
        <div class="seperator_potrait"></div>
        <div class="right_container">
          <div class="patient_communication_container">
            <div
              *ngIf="
                http_rpm_patientList &&
                http_rpm_patientList['PatientProgramdetails'].Status !=
                  'Discharged'
              "
            >
              <div class="device_icon">
                <img
                  class="device_img"
                  id="pd_makeCall"
                  src="../../../../../assets/04-Icons/Icons_Phone A.svg"
                  (click)="makeCallReady()"
                />
              </div>
            </div>
            <div
              *ngIf="
                http_rpm_patientList &&
                http_rpm_patientList['PatientProgramdetails'].Status !=
                  'Discharged'
              "
            >
              <div class="device_icon">
                <img
                  class="device_img"
                  src="../../../../../assets/04-Icons/Icons_Video A.svg"
                  (click)="getVideoconnection(false)"
                />
                 
              </div>
            </div>
            <div
              *ngIf="
                http_rpm_patientList &&
                http_rpm_patientList['PatientProgramdetails'].Status !=
                  'Discharged'
              "
            >
              <div class="device_icon">
                <span *ngIf="unreadCount > 0" class="unread-message">{{
                  unreadCount
                }}</span>
                <img
                  class="device_img"
                  id="pd_chat"
                  src="../../../../../assets/04-Icons/Icons_Chat A.svg"
                  (click)="openChatPanel()"
                />  
                  
              </div>
            </div>
            <div
              *ngIf="
                http_rpm_patientList &&
                http_rpm_patientList['PatientProgramdetails'].Status !=
                  'Discharged'
              "
            >
              <div class="device_icon">
                <img
                  class="device_img"
                  src="../../../../../assets/04-Icons/Icons_SMS A.svg"
                  (click)="openDialogWithTemplateRef()"
                />
              </div>
            </div>
          </div>
          <div>
            <select
              class="plan_data"
              id="pd_programHistory"
              [(ngModel)]="CurrentProgramSelected"
              [ngModelOptions]="{ standalone: true }"
              (ngModelChange)="onProgramHstoryChange($event)"
            >
              <option
                *ngFor="let data of ProgramHistory; let i = index"
                [value]="data.PatientProgramId"
              >
                <span>
                  {{ data.ProgramName }}
                </span>
                <span class="activeStatusStyle">
                  {{ data.StartDate | date : "mediumDate" }}
                </span>
              </option>
            </select>
            <div class="time_container">
              <div class="time_panel">
                {{ PageTimer }}
              </div>
            </div>

            <div class="bottom_container">
              <div class="billing_refresh">
                <p>Interaction Time from Last Billing</p>

                <span class="refresh" (click)="billingReload()"
                  ><img
                    class="refreshIcon"
                    src="../../../../../assets/refresh.png"
                /></span>
              </div>


              <section
                class="progrssbar_container"
              >
                <!-- Custom Progress Bar -->
                <div class="custom-progress-bar-outer">
                  <div
                    class="progress-fill-data"
                    [style.width.%]="patientInteractionMin > colorcodeval ? 100 : (interactionpercentValue > 100 ? 100 : interactionpercentValue)"
                    [ngClass]="patientInteractionMin > colorcodeval ? 'completed-target-data' : ''"
                  ></div>
                </div>

                <!-- Time display -->
                <div *ngIf="interactionpercentValue > 100" class="progressvalue">
                  {{ patientInteractionMin }}:{{ patientInteractionSec }}
                </div>

                <div *ngIf="interactionpercentValue <= 100" class="progressvalue" >
                  {{ patientInteractionMin }}:{{ patientInteractionSec }} /
                  {{ totalInteractionTime }} min
                </div>
              </section>
            </div>
          </div>
        </div>
      </div>
      <!-- Profile Container End-->
    </div>

    <div class="summary-upper-panel">
      <div class="summary_program_overview">
        <div class="summary_program_overview_container">
          <div class="patient-detail-panel-heading">Program Overview</div>
          <div class="program_overview_container">
            <div class="program_overview_title">
              <div class="program_name">
                <p>{{ program_name }}</p>
              </div>
              <div class="duration">
                <p>
                  <span class="duration_value_month">{{
                    http_rpm_patientList &&
                      http_rpm_patientList["PatientProgramdetails"]
                        .ProgramStatus
                  }}</span>
                </p>
              </div>
            </div>
            <div class="program_overview_data">
              <div class="program_overview_item">
                <p class="program_overview_header">Start Date</p>
                <p class="program_overview_value">
                  {{ programStart | date : "mediumDate" }}
                </p>
              </div>
              <!-- <div class="program_overview_item">
                <p class="program_overview_header">Duration</p>
                <p class="program_overview_value">
                  {{
                    http_rpm_patientList &&
                      http_rpm_patientList["PatientProgramdetails"].Duration
                  }}
                  Months
                </p>
              </div> -->
              <div class="program_overview_item program_overview_vital">
                <p class="program_overview_header">
                  {{
                    patientProgramname != "CCM" && patientProgramname != "PCM"
                      ? "Vitals Monitored"
                      : "Condition Monitored"
                  }}
                </p>
                <div  class="program_overview_value_panel">
                  <div *ngFor="let vital of patiantVital" >
                     <p class="program_overview_value">{{ vital.Vital }}</p>
                </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="summary_critical_event">
        <div class="patient-detail-panel-heading">Critical Event</div>
        <div *ngIf="http_get_symptoms">
          <div
            *ngIf="PatientCriticalAlerts && PatientCriticalAlerts.length == 0"
            class="default_no_date"
          >
            No data
          </div>
          <div
            *ngFor="
              let alert of PatientCriticalAlerts;
              let i = index;
              let first = first;
              let last = last
            "
          >
            <div
              class="summary_alert_item_data"
              [ngStyle]="{
                'border-radius': first
                  ? '0.5rem 0.5rem 0px 0px'
                  : last
                  ? '0px 0px 0.5rem 0.5rem'
                  : ''
              }"
              [ngClass]="{
                priority_low: alert.Priority == 'Low',
                priority_high: alert.Priority == 'Critical',
                priority_missing: alert.Priority == 'Moderate'
              }"
            >
              <p
                class="summary_alert_item summary_alert_item_title"
                title="{{ alert.VitalAlert }}"
              >
                {{ alert.VitalAlert }}
              </p>
              <p class="summary_alert_item" *ngIf="alert.Time">
                {{
                  datepipe.transform(
                    convertToLocalTime(alert.Time),
                    "MMM d, yyyy"
                  )
                }}
                -
                {{
                  datepipe.transform(convertToLocalTime(alert.Time), "h: mm a")
                }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div
      class="summary_graph_main"
      *ngIf="!loading && !loading_two && !loading3 && !loading4
         && patientProgramname != 'CCM'
         && patientProgramname != 'PCM'"
    >
      <div class="health-panel-btn">
        <p class="patient-detail-panel-heading">Health Trends</p>

        <!-- (click)="healthoverview(1)" [ngStyle]="{'background-color': heath_overview_frequency== 1 ? '#164d61'  : '#e1e6ed', 'color': heath_overview_frequency == 1 ? '#ffffff' :'#164d61' }" -->
        <!-- <button class="btn-date_container" (click)="healthoverview(1)" [ngClass]="heath_overview_frequency== 1 ? 'date_selected_':'date_not_selected'"  >Today</button> -->
        <div class="date_btn_panel" >
          <button
            class="btn-date_container"
            id="pd_HealthTrends7day"
            (click)="healthtrends(7)"
            [ngClass]="
              heath_trends_frequency == 7
                ? 'date_selected_'
                : 'date_not_selected'
            "
          >
            7 days
          </button>
          <button
            class="btn-date_container"
            id="pd_HealthTrends30day"
            (click)="healthtrends(30)"
            [ngClass]="
              heath_trends_frequency == 30
                ? 'date_selected_'
                : 'date_not_selected'
            "
          >
            30 days
          </button>
        </div>
      </div>
      <!-- <div
        class="summary_graph_container"
        *ngIf="http_healthtrends.VitalName != null"
      > -->
      <div class="summary_graph_container">
        <div
          class="vital-buttons"
          *ngIf="
            healthtrendVitalNameArray && healthtrendVitalNameArray.length > 0
          "
        >
          <button
            class="vital-buttons-item"
            *ngFor="let vital of healthtrendVitalNameArray"
            (click)="onHealthTrendVitalClick(vital, heath_trends_frequency)"
            [ngClass]="{
              'vital_selected_': vital === selectedVital,
              'vital_not_selected': vital !== selectedVital
            }"
          >
            {{ vital }}
          </button>
        </div>

        <div id="pdfGraph" style="display: block; width: 100%; height: 98%">
          <canvas
            class="charttrends"
            baseChart
            width="1"
            height="1"
            [datasets]="lineChartData"
            [labels]="lineChartLabels"
            [options]="lineChartOptions"
            [legend]="lineChartLegend"
            id="pd_healthTrends"
            [type]="'line'"
          >
          </canvas>
        </div>
      </div>
    </div>

    <div class="summary-lower-panel">
      <div class="summary_lower_main_panel">
        <div class="summary_billing_info">
          <div class="billing_refresh">
            <p class="patient-detail-panel-heading">Billing Overview</p>

            <span class="refresh" (click)="billingReload()"
              ><img class="refreshIcon" src="../../../../../assets/refresh.png"
            /></span>
          </div>

          <div class="summary_billing_content" *ngIf="BillingOverview">
            <div *ngIf="BillingPeriodStart" class="billingOverviewDatePanel">
              <div class="billingOverviewDatePanel_left">
                <p class="data_title">Start</p>
                <p class="data_value">{{ BillingPeriodStart }}</p>
              </div>
              <div class="billingOverviewDatePanel_right">
                <p class="data_title">End</p>
                <p class="data_value">{{ BillingPeriodEnd }}</p>
              </div>
            </div>

            <div *ngIf="BillingOverview.length > 0">
              <div *ngFor="let data of progrss_billing_array">
                <div>
                  <p>Billing Code - {{ data.billing_code }}</p>
                  <section
                    class="billing-progress progrssbar_container summary_progrssbar_container"
                    [ngClass]="data.targetmet ? 'completed-text' : ''"
                  >
                    <div class="custom-progress-bar">
                      <div
                        class="progress-fill"
                        [ngClass]="{ 'progress-fill-success': data.targetmet }"
                        [style.width.%]="data.billing_value"
                      ></div>
                    </div>
                    <div
                      class="billing-progressvalue"
                      [ngClass]="
                        data.progress_value == 'Not Available'
                          ? 'progress-text'
                          : ''
                      "
                    >
                      {{ data.progress_value }}
                    </div>
                  </section>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="alert_schedule_main_summary">
          <div>
            <p class="patient-detail-panel-heading">Upcoming Schedule</p>
            <div class="summary_schedule">
              <div class="summary_schedule_data_main">
                <div
                  *ngFor="
                    let s of scheduleData;
                    let first = first;
                    let last = last
                  "
                >
                  <div
                    class="summary_schedule_data"
                    [ngStyle]="{
                      'border-radius': first
                        ? '0.5rem 0.5rem 0px 0px'
                        : last
                        ? '0px 0px 0.5rem 0.5rem'
                        : ''
                    }"
                  >
                    <p>{{ s.description }}</p>
                    <p>{{ s.time }}</p>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <p class="patient-detail-panel-heading">
                {{
                  patientProgramname != "CCM" && patientProgramname != "PCM"
                    ? "Open Alerts & Tasks"
                    : "Open Tasks"
                }}
              </p>
              <div class="summary_task">
                <div class="summary_due_title">
                  <p>
                    {{ latestAlertsAndTasks && latestAlertsAndTasks.length }}
                    Due today
                  </p>
                </div>
                <div
                  *ngIf="
                    latestAlertsAndTasks && latestAlertsAndTasks.length == 0
                  "
                  class="no_data_alert_task"
                >
                  No data
                </div>
                <div
                  *ngFor="let task_item of latestAlertsAndTasks; let i = index"
                >
                  <div
                    class="summary_due_content"
                    [ngStyle]="{
                      'border-radius':
                        i == latestAlertsAndTasks.length - 1
                          ? '0px 0px 8px 8px;'
                          : '0px'
                    }"
                    [ngClass]="{
                      priority_low: task_item.Priority == 'Low',
                      priority_high: task_item.Priority == 'High',
                      priority_medium: task_item.Priority == 'Medium'
                    }"
                  >
                    <div class="summary_due_alert_title">
                      <p
                        title="{{ task_item.tasktype }}"
                        class="open_alert_title"
                      >
                        {{ task_item.tasktype }}
                      </p>
                    </div>
                    <div
                      class="task_priority_panel"
                      *ngIf="task_item.type == 'Alert'"
                    >
                      <button
                        class="task_priority_btn"
                        id="pd_alertPrioritybtn"
                        [ngClass]="{
                          btn_critical: task_item.priority == 'Critical',
                          priority_missing: task_item.priority == 'Moderate',
                          btn_medium:
                            task_item.priority == 'Severe' ||
                            task_item.priority == 'Cautious'
                        }"
                      >
                        {{ task_item.priority }}
                      </button>
                    </div>
                    <div
                      class="task_priority_panel"
                      *ngIf="task_item.type == 'Task'"
                    >
                      <button
                        class="task_priority_btn"
                        id="pd_taskPrioritybtn"
                        [ngClass]="{
                          btn_critical: task_item.priority == 'Urgent',
                          btn_high: task_item.priority == 'High',
                          btn_medium: task_item.priority == 'Medium',
                          btn_low: task_item.priority == 'Low'
                        }"
                      >
                        {{ task_item.priority }}
                      </button>
                    </div>

                    <p class="summary_due_alert_assignee">
                      {{ task_item.assigned }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="summary_core_team">
      <p class="patient-detail-panel-headingpatient-detail-panel-heading">
        Care Team
      </p>
      <div class="summary_core_team_content">
        <div class="core_panel_left">
          <p class="data_title">Physician</p>
          <p class="data_value">
            {{
              http_rpm_patientList &&
                http_rpm_patientList.PatientPrescribtionDetails.Physician
            }}
          </p>
        </div>
        <div class="core_panel_middle">
          <div>
            <p class="data_title">Care Team Personal</p>
            <p class="data_value">
              {{
                http_rpm_patientList &&
                  http_rpm_patientList.PatientProgramdetails.AssignedMember
              }}
            </p>
          </div>
        </div>
        <div class="core_panel_middle">
          <div>
            <p class="data_title">Care Team Manager</p>
            <p class="data_value">
              {{
                http_rpm_patientList &&
                  http_rpm_patientList.PatientProgramdetails.Manager
              }}
            </p>
          </div>
        </div>
        <!-- <div class="core_panel_right">
          <div>
            <p class="data_title">Delegation</p>
            <p class="data_value"></p>
          </div>
          <div>
            <p class="data_title">Duration</p>
            <p class="data_value"></p>
          </div>
        </div> -->
      </div>
    </div>
  </div>
    <div class="chart-wrapper-scrollfix">
    <div *ngIf="allLineChartData?.length">
      <div *ngFor="let chartData of allLineChartData; let i = index">
        <ng-container *ngIf="chartData?.lineChartData?.length; else emptyGraph">
          <div class="summary_graph_container" style="overflow: hidden; visibility: hidden">
            <div
              class="pdfData"
              style="display: block; width: 100%; height: 98%; visibility: hidden"
              *ngIf="http_healthtrends"
            >
              <canvas
                class="charttrends"
                baseChart
                width="1"
                height="1"
                [datasets]="chartData.lineChartData"
                [labels]="chartData.lineChartLabels"
                [options]="lineChartOptions"
                [legend]="lineChartLegend"
                id="pd_ClinicalHtrends"
                [type]="'line'"
              >
              </canvas>
            </div>
          </div>
        </ng-container>
        <!--  Empty Chart fallback -->
        <ng-template #emptyGraph>
          <div class="summary_graph_container" style="overflow: hidden; visibility: hidden">
            <div
              class="pdfData"
              style="display: block; width: 100%; height: 98%; visibility: hidden"
              *ngIf="http_healthtrends"
            >
              <canvas
                class="charttrends"
                baseChart
                width="1"
                height="1"
                [datasets]="emptyChartDataset"
                [labels]="[]"
                [options]="lineChartOptions"
                [legend]="lineChartLegend"
                id="pd_ClinicalHtrends"
                [type]="'line'"
              >
              </canvas>
            </div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</ng-template>

<!-- message Dialog Panel -->

<ng-template #messageDialog>
  <div class="smsPanel">
    <div class="dialogContainer">
      <h2>New Message</h2>
      <img
        class="cancelIcon"
        src="../../../../../assets/04-Icons/Icons_Cancel.svg"
      />
    </div>

    <!-- <mat-dialog-content> -->
      <div class="messagetemplate">
        <div class="messageContainer">
          <textarea class="message_container_panel" #messageInput> </textarea>
        </div>
      </div>
    <!-- </mat-dialog-content>
    <mat-dialog-actions> -->
      <div class="message_btn_action_panel">
        <div></div>
        <div class="btn_subPanel">
          <button class="btn_cancel" id="pd_MsgCancel" (click)="smsCancel()">
            Cancel
          </button>
          <button

            [class.spinner]="loading_sms"
            [disabled]="loading_sms"
            class="btn_save"
            id="pd_MsgSent"
            (click)="sentSMS(messageInput.value)"
          >
            Send
          </button>
        </div>
      </div>
    <!-- </mat-dialog-actions> -->
  </div>

</ng-template>

<!-- Patient Info Template Second Menu Start -->
<ng-template #patientInfo>
  <div class="patientInfo">
    <div class="patientInfo-main-panel">
      <div class="patientInfo_menu">
        <div class="programInfo_menu_item">
          <img
            class="programInfo_check_icon"
            src="../../../../../assets/04-Icons/Icons_Check A.svg"
            alt=""
          />

          <button id="pd_PersonalInfo" (click)="scroll(personalInfo)">
            Personal Information
          </button>
        </div>

        <div class="programInfo_menu_item">
          <img
            class="programInfo_check_icon"
            src="../../../../../assets/04-Icons/Icons_Check A.svg"
            alt=""
          />

          <button id="pd_CommunicationInfo" (click)="scroll(CommunicationInfo)">
            Communication details
          </button>
        </div>

        <div class="programInfo_menu_item">
          <img
            class="programInfo_check_icon"
            src="../../../../../assets/04-Icons/Icons_Check A.svg"
            alt=""
          />

          <button id="pd_preferenceInfo" (click)="scroll(preferenceInfo)">
            Patient Preferences
          </button>
        </div>
      </div>
      <!-- Personal Information Start -->
      <div class="personalInfo_base_panel">
        <div class="personal_info_container" #personalInfo>
          <div class="patient-detail-panel-heading">Personal Information</div>

          <div class="personal_info_data">
            <div class="profile_pic">
              <p class="profile_text">Profile Picture</p>
              <img
                class="profile_img"
                src="{{ http_rpm_patientList.PatientDetails.Picture }}"
              />
            </div>
            <div class="first_panel">
              <div class="personal_content">
                <p class="data_title">First Name</p>
                <p class="data_value">
                  {{ http_rpm_patientList["PatientDetails"].FirstName }}
                </p>
              </div>

              <div class="personal_content">
                <p class="data_title">Middle Name</p>
                <p class="data_value">
                  {{ http_rpm_patientList["PatientDetails"].MiddleName }}
                </p>
              </div>
              <div class="personal_content">
                <p class="data_title">Date Of Birth</p>
                <p class="data_value">
                  {{
                    http_rpm_patientList &&
                      http_rpm_patientList["PatientDetails"].DOB
                      | date : "MMM d, y"
                  }}({{
                    getAge(
                      http_rpm_patientList &&
                        http_rpm_patientList["PatientDetails"].DOB
                    )
                  }}
                  Years)
                </p>
              </div>
              <div>
                <p class="data_title">Gender</p>
                <p class="data_value">
                  {{ http_rpm_patientList["PatientDetails"].Gender }}
                </p>
              </div>
            </div>
            <div class="second_panel">
              <div style="visibility: hidden">
                <p class="data_title">Last Name</p>
                <p class="data_value"></p>
              </div>

              <div class="personal_content">
                <p class="data_title">Last Name</p>
                <p class="data_value">
                  {{ http_rpm_patientList["PatientDetails"].LastName }}
                </p>
              </div>
              <div class="personal_content">
                <p class="data_title">Height</p>
                <p class="data_value">
                  {{
                    http_rpm_patientList &&
                      http_rpm_patientList.PatientDetails.Height
                  }}
                </p>
              </div>
              <div class="personal_content">
                <p class="data_title">Weight</p>
                <p class="data_value">
                  {{ http_rpm_patientList["PatientDetails"].Weight }}
                </p>
              </div>
            </div>
            <div class="communication_seperater">.</div>
            <div class="third_panel">
              <div class="email_panel">
                <div class="personal_content">
                  <p class="data_title">Email</p>
                  <p class="data_value">
                    {{ http_rpm_patientList["PatientDetails"].Email }}
                  </p>
                </div>
              </div>
              <div class="personal_content">
                <p class="data_title">Mobile Number (Primary)</p>
                <p class="data_value">
                  {{ http_rpm_patientList["PatientDetails"].MobileNo }}
                </p>
              </div>
              <div>
                <p class="data_title">Alternate Number (Optional)</p>
                <p class="data_value">
                  {{ http_rpm_patientList["PatientDetails"].AlternateMobNo }}
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Personal Information End -->
        <div class="communication_info_container" #CommunicationInfo>
          <div class="patient-detail-panel-heading">Communication Details</div>
          <div class="communiucation_clinical_info">
            <div class="communiucation_clinical_info_item">
              <p class="data_title">Clinic Name</p>
              <p class="data_value">{{ clinicName }}</p>
            </div>
            <div class="communiucation_clinical_info_item">
              <p class="data_title">Clinic Code</p>
              <p class="data_value">{{ clinicCode }}</p>
            </div>
          </div>
          <div class="communiucation_info_data">
            <div class="communication_first_panel">
              <div class="communication_address personal_content">
                <p class="data_title">Address Line 1</p>
                <p class="data_address_value">
                  {{ http_rpm_patientList["PatientDetails"].Address1 }}
                </p>
              </div>
              <div class="communication_address personal_content">
                <p class="data_title">Address Line 2</p>
                <p class="data_address_value">
                  {{ http_rpm_patientList["PatientDetails"].Address2 }}
                </p>
              </div>
              <div class="address_zipcode">
                <div class="zipcode_left_panel personal_content">
                  <p class="data_title">State</p>
                  <p class="data_value">{{ state }}</p>
                </div>
                <div class="zipcode_right_panel personal_content">
                  <p class="data_title">City</p>
                  <p class="data_value">{{ city }}</p>
                </div>
              </div>
              <div class="state_timezone">
                <div class="state_timezone_left personal_content">
                  <p class="data_title">Zip Code</p>
                  <p class="data_value">
                    {{ http_rpm_patientList["PatientDetails"].ZipCode }}
                  </p>
                </div>
                <div class="state_timezone_right personal_content">
                  <p class="data_title">Time zone</p>
                  <!-- <p *ngIf="timezone.length > 0" class="data_value">
                    {{ timezone[0].Name }}
                  </p> -->
                  <p class="data_value">
                    {{ http_rpm_patientList["PatientDetails"].TimeZone }}
                  </p>
                </div>
              </div>
            </div>
            <div class="communication_seperater">.</div>
            <div class="communication_second_panel">
              <div class="emergency_contact">
                <div class="emergency_contact_left personal_content">
                  <p class="data_title">Emergency Contact 1</p>
                  <p class="data_value">
                    {{ http_rpm_patientList["PatientDetails"].Contact1Name }}
                  </p>
                </div>
                <div class="emergency_contact_right">
                  <div class="personal_content">
                    <p class="data_title">Relationship</p>
                    <p class="data_value">
                      {{
                        http_rpm_patientList["PatientDetails"]
                          .Contact1RelationName
                      }}
                    </p>
                  </div>
                  <div>
                    <p class="data_title">Mobile Number</p>
                    <p class="data_value">
                      {{ http_rpm_patientList["PatientDetails"].Contact1Phone }}
                    </p>
                  </div>
                </div>
              </div>

              <div class="emergency_contact">
                <div class="emergency_contact_left personal_content">
                  <p class="data_title">Emergency Contact 2</p>
                  <p class="data_value">
                    {{ http_rpm_patientList["PatientDetails"].Contact2Name }}
                  </p>
                </div>
                <div class="emergency_contact_right">
                  <div class="personal_content">
                    <p class="data_title">Relationship</p>
                    <p class="data_value">
                      {{
                        http_rpm_patientList["PatientDetails"]
                          .Contact2RelationName
                      }}
                    </p>
                  </div>
                  <div>
                    <p class="data_title">Mobile Number</p>
                    <p class="data_value">
                      {{ http_rpm_patientList["PatientDetails"].Contact2Phone }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Prefer template Start  -->
        <div class="prefer_info_container" #preferenceInfo>
          <div class="patient-detail-panel-heading">Patient Preferences</div>

          <div class="prefer_info_data">
            <div class="panel_one">
              <div class="preference_call_container personal_content">
                <div class="preference_call_container_left">
                  <p class="data_title">Call Time</p>
                  <p class="data_value">
                    {{ http_rpm_patientList["PatientDetails"].CallTime }}
                  </p>
                </div>
                <div class="preference_call_container_right">
                  <p class="data_title">Language</p>
                  <p class="data_value">
                    {{ http_rpm_patientList["PatientDetails"].Language }}
                  </p>
                </div>
              </div>

              <div class="personal_content">
                <p class="data_title">Preference 1</p>
                <p class="data_value">
                  {{ http_rpm_patientList["PatientDetails"].Preference1 }}
                </p>
              </div>
              <div class="personal_content">
                <p class="data_title">Preference 2</p>
                <p class="data_value">
                  {{ http_rpm_patientList["PatientDetails"].Preference2 }}
                </p>
              </div>
              <div class="personal_content">
                <p class="data_title">Preference 3</p>
                <p class="data_value">
                  {{ http_rpm_patientList["PatientDetails"].Preference3 }}
                </p>
              </div>
            </div>
            <div class="panel_two">
              <p class="data_title">Quick Notes</p>
              <div class="quick_notes_data_value">
                {{ http_rpm_patientList["PatientDetails"].Notes }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<!-- Patient Info Template Second Menu End -->
<!-- ************************************************************************** -->

<!-- Program Info Template Main Third Menu Start -->
<ng-template #programInfo>
  <div class="programInfo">
    <div class="program_main_data_panel">
      <!-- Program Main panel Start -->

      <!-- ProgramInfo Menu Panel Start -->
      <div class="programInfo_menu">
        <div class="programInfo_menu_item">
          <img
            class="programInfo_check_icon"
            src="../../../../../assets/04-Icons/Icons_Check A.svg"
            alt=""
          />
          <button id="pd_ProgramDetails" (click)="scroll(programInfodata)">
            Program Details
          </button>
        </div>
        <div
          class="programInfo_menu_item"
          *ngIf="patientProgramname != 'CCM' && patientProgramname != 'PCM'"
        >
          <img
            class="programInfo_check_icon"
            src="../../../../../assets/04-Icons/Icons_Check A.svg"
            alt=""
          />
          <button id="pd_DeviceDetails" (click)="scroll(deviceInfodata)">
            Device Details
          </button>
        </div>
        <div
          class="programInfo_menu_item"
          *ngIf="patientProgramname != 'CCM' && patientProgramname != 'PCM'"
        >
          <img
            class="programInfo_check_icon"
            src="../../../../../assets/04-Icons/Icons_Check A.svg"
            alt=""
          />
          <button id="pd_VitalSchedules" (click)="scroll(vitalInfodata)">
            Vital Schedules
          </button>
        </div>
        <div class="programInfo_menu_item">
          <img
            class="programInfo_check_icon"
            src="../../../../../assets/04-Icons/Icons_Check A.svg"
            alt=""
          />
          <button id="pd_BillingInfo" (click)="scroll(billingInfodata)">
            Billing Info
          </button>
        </div>
        <div class="programInfo_menu_item last-child">
          <img
            class="programInfo_check_icon"
            src="../../../../../assets/04-Icons/Icons_Check A.svg"
            alt=""
          />
          <button id="pd_Documents" (click)="scroll(documentInfodata)">
            Documents
          </button>
        </div>
      </div>
      <!-- ProgramInfo Menu Panel End -->

      <div class="program_base_panel">
        <div #programInfodata class="program_info_main">
          <div class="program_detail">
            <div class="program_details_sub">
              <!-- Program Detail Start -->
              <div class="patient-detail-panel-heading">Program Details</div>

              <div class="program_detail_data">
                <div class="program_detail_rowOne">
                  <div class="program_detail_rowOne_left">
                    <p class="program_data_title">Program Name</p>
                    <p class="program_data_value">{{ program_name }}</p>
                  </div>
                  <div class="program_detail_rowOne_right">
                    <p class="program_data_title">Duration</p>
                    <p class="program_data_value">
                      {{
                        http_rpm_patientList["PatientProgramdetails"].Duration
                      }} Months
                    </p>
                  </div>
                </div>

                <div class="program_detail_rowOne">
                  <div class="program_detail_rowOne_left">
                    <p class="program_data_title">Start Date</p>
                    <p class="program_data_value">
                      {{ programStart | date : "mediumDate" }}
                    </p>
                  </div>
                  <div class="program_detail_rowOne_right">
                    <p class="program_data_title">End Date</p>
                    <p class="program_data_value">
                      {{ program_endTime | date : "mediumDate" }}
                    </p>
                  </div>
                </div>
                <div class="program_detail_rowOne">
                  <div class="vital_name program_detail_rowOne_left">
                    <p class="program_data_title">Vitals/Condition Monitored</p>
                    <div *ngFor="let vitalitem of patiantVital">
                      <p class="program_data_value program_condtion">
                        {{ vitalitem.Vital }}
                      </p>
                    </div>
                  </div>

                  <div class="program_detail_rowOne_right">
                    <!-- <p class="program_data_title">Target / Month</p>
                    <p class="program_data_value ">{{http_rpm_patientList['PatientProgramdetails'].TargetReadings}}</p> -->
                  </div>
                </div>
              </div>
              <div class="goal_detail_data">
                <p class="program_data_title">Goal</p>
                <div
                  *ngFor="
                    let goal of http_rpm_patientList['PatientProgramGoals']
                      .goalDetails
                  "
                >
                  <div>
                    <p class="program_data_value">{{ goal.Goal }}</p>
                    <div class="goal_data_value">
                      <!-- <div *ngFor="let goal_item  of goal.details"> -->
                      <p class="goal_description">{{ goal.Description }}</p>
                      <!-- </div> -->
                    </div>
                  </div>
                </div>
                <!-- <p class="program_data_title">*Potential Barriers</p>
                <div *ngFor="let potentialbarriers of program_details.programinfo.potentialbarriers">
                  <div>
                    <p class="program_data_value">{{potentialbarriers.category}}</p>
                    <p class="goal_data_value">{{potentialbarriers.details}}</p>
                  </div>

                </div> -->
              </div>
            </div>
          </div>
          <!-- Program Detail End -->
          <!-- Program Timeline Start -->
          <div class="program_timeline">
            <div class="patient-detail-panel-heading">Program Timeline</div>
            <div class="program_timeline_data">
              <div class="program_timeline_upper_sub_panel">
                <div class="program_timeline_left">
                  <div class="program_timeline_left_data assigned_member">
                    <p class="program_data_title">*Assigned Member</p>

                    <p class="program_data_value">
                      {{
                        http_rpm_patientList["PatientProgramdetails"]
                          .AssignedMember
                      }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="program_timeline_data">
              <div class="program_timeline_upper_panel">
                <div class="program_timeline_left">
                  <div class="program_timeline_left_data">
                    <p class="program_data_title">Patient Status</p>
                    <p class="program_data_value">
                      {{
                        http_rpm_patientList["PatientPrescribtionDetails"]
                          .Status
                      }}
                    </p>
                  </div>
                  <div class="program_timeline_left_data">
                    <p class="program_data_title">Physician</p>
                    <p class="program_data_value">
                      {{
                        http_rpm_patientList["PatientPrescribtionDetails"]
                          .Physician
                      }}
                    </p>
                  </div>
                  <div class="program_timeline_left_data">
                    <p class="program_data_title">Clinic</p>
                    <p class="program_data_value">
                      {{
                        http_rpm_patientList["PatientPrescribtionDetails"]
                          .Clinic
                      }}
                    </p>
                  </div>
                </div>
                <div class="program_timeline_right">
                  <div class="program_timeline_left_data">
                    <p class="program_data_title">Date</p>
                    <p class="program_data_value">
                      {{
                         convertToLocalTime(
                        http_rpm_patientList.PatientPrescribtionDetails.PrescribedDate
                      ) | date : "mediumDate"
                      }}
                    </p>
                  </div>
                  <div class="program_timeline_left_data">
                    <p class="program_data_title">Order Date</p>
                    <p class="program_data_value">
                      <!-- {{ patientconsultationDate | date : "mediumDate" }} -->
                      {{
                        http_rpm_patientList &&
                          http_rpm_patientList["PatientPrescribtionDetails"]
                            .ConsultationDate | date : "MMM d, y"
                      }}
                    </p>
                  </div>
                  <div class="program_timeline_left_data">
                    <!-- <p class="program_data_title">Branch</p> -->
                    <!-- <p class="program_data_value">{{http_rpm_patientList['PatientPrescribtionDetails'].Branch}}</p> -->
                    <p class="program_data_title">Clinic Code</p>
                    <p class="program_data_value">{{ clinicCode }}</p>
                  </div>
                </div>
              </div>
              <div
                class="program_timeline_lower_panel"
                *ngFor="
                  let diagnosis of http_rpm_patientList[
                    'PatientPrescribtionDetails'
                  ].PatientDiagnosisInfos;
                  let first = first;
                  let index = index
                "
              >
                <!-- <div class="program_detail_title">
                  <p class="program_timeline_diagonosis program_data_title">Diagonosis </p>
                  <p class="program_timeline_code program_data_title">Code </p>
                </div> -->

                <div class="diagonosis_panel">
                  <div class="diagonosis">
                    <div class="diagonosis_left">
                      <p
                        class="program_timeline_diagonosis program_data_title"
                        *ngIf="first && { display: 'block' }"
                      >
                        Diagnosis
                      </p>
                      <p class="program_data_value">
                        {{ diagnosis.DiagnosisName }}
                      </p>
                    </div>

                    <div class="diagonosis_right">
                      <p
                        class="program_timeline_code program_data_title"
                        *ngIf="first && { display: 'block' }"
                      >
                        Code
                      </p>
                      <p class="program_data_value">
                        {{ diagnosis.DiagnosisCode }}
                      </p>
                    </div>
                  </div>
                  <br />
                </div>
              </div>
            </div>
            <div
              *ngIf="http_rpm_patientList.PatientEnrolledDetails.Status != null"
              class="program_stage_panel"
            >
              <div class="program_stage_left_panel">
                <div class="program_stage_data">
                  <p class="program_data_title">Patient Status</p>
                  <p class="program_data_value">Enrollment</p>
                </div>
                <div class="program_stage_data">
                  <p class="program_data_title">Enrollment Personal</p>
                  <div
                    *ngFor="
                      let mem of http_rpm_patientList.PatientEnrolledDetails
                        .patientEnrolledInfos
                    "
                  >
                    <p class="program_data_value programdata_p">
                      {{ mem.EnrollmentPersonal }}
                    </p>
                  </div>
                </div>
              </div>
              <div class="program_stage_right_panel">
                <div>
                  <p class="program_data_title">Date</p>
                  <p class="program_data_value">
                    {{
                      convertToLocalTime(
                        http_rpm_patientList.PatientEnrolledDetails.AssignedDate
                      ) | date : "mediumDate"
                    }}
                  </p>
                </div>
                <!-- {{this.convertDate(http_rpm_patientList.PatientEnrolledDetails.AssignedDate)}} -->
                <!-- <div>
                  <p class="program_data_title">Onboard Personal</p>
                  <p class="program_data_value">John Abraham</p>
                </div> -->
              </div>
            </div>
            <div
              *ngIf="http_rpm_patientList.ActivePatientDetails.Status != null"
              class="program_stage_panel"
            >
              <div class="program_stage_left_panel">
                <div>
                  <p class="program_data_title">Patient Status</p>
                  <p class="program_data_value">Active</p>
                </div>
                <div>
                  <p class="program_data_title">Enrollment Personal</p>
                  <p class="program_data_value">
                    {{ http_rpm_patientList.ActivePatientDetails.AssigneeName }}
                  </p>
                </div>
              </div>
              <div class="program_stage_right_panel">
                <div>
                  <p class="program_data_title">Date</p>
                  <p class="program_data_value">
                    {{
                      convertToLocalTime(
                        http_rpm_patientList.ActivePatientDetails.AssignedDate
                      ) | date : "mediumDate"
                    }}
                  </p>
                </div>
              </div>
            </div>
            <div
              *ngIf="
                http_rpm_patientList.ReadyForDischargePatientDetails.Status !=
                null
              "
              class="program_stage_panel"
            >
              <div class="program_stage_left_panel">
                <div>
                  <p class="program_data_title">Patient Status</p>
                  <p class="program_data_value">Ready To Discharge</p>
                </div>
                <div>
                  <p class="program_data_title">Assigned Personal</p>
                  <p class="program_data_value">
                    {{
                      http_rpm_patientList.ReadyForDischargePatientDetails
                        .AssigneeName
                    }}
                  </p>
                </div>
              </div>
              <div class="program_stage_right_panel">
                <div>
                  <p class="program_data_title">Date</p>
                  <p class="program_data_value">
                    {{
                      convertToLocalTime(
                        http_rpm_patientList.ReadyForDischargePatientDetails
                          .AssignedDate
                      ) | date : "mediumDate"
                    }}
                  </p>
                </div>
              </div>
            </div>
            <div
              *ngIf="
                http_rpm_patientList.DischargedPatientDetails.Status != null
              "
              class="program_stage_panel"
            >
              <div class="program_stage_left_panel">
                <div>
                  <p class="program_data_title">Patient Status</p>
                  <p class="program_data_value">Discharged</p>
                </div>
                <div>
                  <p class="program_data_title">Assigned Personal</p>
                  <p class="program_data_value">
                    {{
                      http_rpm_patientList.DischargedPatientDetails.AssigneeName
                    }}
                  </p>
                </div>
              </div>
              <div class="program_stage_right_panel">
                <div>
                  <p class="program_data_title">Date</p>
                  <p class="program_data_value">
                    {{
                      convertToLocalTime(
                        http_rpm_patientList.DischargedPatientDetails
                          .AssignedDate
                      ) | date : "mediumDate"
                    }}
                  </p>
                </div>
              </div>
            </div>
            <div
              *ngIf="
                http_rpm_patientList &&
                http_rpm_patientList.OnHoldPatientDetais.Status == 'OnHold'
              "
              class="program_stage_panel"
            >
              <div class="program_stage_left_panel">
                <div>
                  <p class="program_data_title">Patient Status</p>
                  <p class="program_data_value">On Hold</p>
                </div>
                <div>
                  <p class="program_data_title">Assigned Personal</p>
                  <p class="program_data_value">
                    {{ http_rpm_patientList.OnHoldPatientDetais.AssigneeName }}
                  </p>
                </div>
              </div>
              <div class="program_stage_right_panel">
                <div>
                  <p class="program_data_title">Date</p>
                  <p class="program_data_value">
                    {{ onHoldDate | date : "mediumDate" }}
                  </p>
                </div>
              </div>
            </div>
            <div
              class="program_stage_panel"
              *ngIf="
                http_rpm_patientList &&
                http_rpm_patientList.InActivePatientDetais.Status == 'InActive'
              "
            >
              <div class="program_stage_left_panel">
                <div>
                  <p class="program_data_title">Patient Status</p>
                  <p class="program_data_value">InActive</p>
                </div>
                <div>
                  <p class="program_data_title">Assigned Personal</p>
                  <p class="program_data_value">
                    {{
                      http_rpm_patientList.InActivePatientDetais.AssigneeName
                    }}
                  </p>
                </div>
              </div>
              <div class="program_stage_right_panel">
                <div>
                  <p class="program_data_title">Date</p>
                  <p class="program_data_value">
                    {{
                      convertToLocalTime(
                        http_rpm_patientList &&
                          http_rpm_patientList.InActivePatientDetais
                            .AssignedDate
                      ) | date : "mediumDate"
                    }}
                  </p>
                </div>
              </div>
            </div>
          </div>
          <!-- Program Timeline End -->
        </div>
        <!-- Program Device details Start -->
        <div #deviceInfodata class="device_details">
          <div
            *ngIf="
              http_rpm_patientList &&
              http_rpm_patientList.PatientDevicesDetails.PatientDeviceInfos
                .length > 0
            "
            class="patient-detail-panel-heading"
          >
            <div
              *ngIf="patientProgramname != 'CCM' && patientProgramname != 'PCM'"
            >
              Device Details
            </div>
          </div>

          <div
            *ngIf="patientProgramname != 'CCM' && patientProgramname != 'PCM'"
          >
            <div
              *ngFor="
                let device of http_rpm_patientList &&
                  http_rpm_patientList.PatientDevicesDetails.PatientDeviceInfos
              "
            >
              <div class="device_details_content">
                <div class="device_detail_left">
                  <div class="device_detail_sub_panel_left">
                    <p class="program_data_title">Vitals Monitoring</p>
                    <p class="program_data_value">{{ device.VitalName }}</p>
                  </div>
                  <div class="device_detail_sub_panel_right">
                    <p class="program_data_title">Device ID</p>
                    <p class="program_data_value">{{ device.DeviceNumber }}</p>
                  </div>
                </div>
                <div class="device_detail_right">
                  <div class="device_detail_right_sub">
                    <div class="device_right_detail_sub_left">
                      <div>
                        <p class="program_data_title">Device</p>
                        <p class="program_data_value">
                          {{ device.DeviceName }}
                        </p>
                      </div>
                      <div>
                        <p class="program_data_title">Device Type</p>
                        <p class="program_data_value">
                          {{ device.DeviceCommunicationType }}
                        </p>
                      </div>
                    </div>
                    <div class="device_right_detail_sub_right">
                      <div>
                        <p class="program_data_title">Device Status</p>
                        <p class="program_data_value">
                          {{ device.DeviceStatus }}
                        </p>
                      </div>
                      <!-- <div>
              <button class="btn_test_device">TEST DEVICE</button>
            </div> -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Program Device details End -->
        <!-- Program Vital Schedule Start -->
        <div #vitalInfodata class="vital_schedule">
          <div
            class="patient-detail-panel-heading"
            *ngIf="patientProgramname != 'CCM' && patientProgramname != 'PCM'"
          >
            Vital Schedules
          </div>
          <div
            class="vital_schedule_data"
            *ngIf="patientProgramname != 'CCM' && patientProgramname != 'PCM'"
          >
            <!-- <ng-container [ngSwitch]="vitalVariable">
              <ng-container *ngSwitchCase="1">
                <ng-container *ngTemplateOutlet="vitalGlucose"></ng-container>
              </ng-container>
              <ng-container *ngSwitchCase="2">
                <ng-container *ngTemplateOutlet="vitalPressure"></ng-container>
              </ng-container>
              <ng-container *ngSwitchDefault>
                <ng-container *ngTemplateOutlet="vitalPressure"></ng-container>
              </ng-container>
            </ng-container> -->

            <div
              *ngFor="
                let v of http_rpm_patientList &&
                  http_rpm_patientList.PatientVitalDetails.PatientVitalInfos
              "
            >
              <div id="vitalGlucose">
                <div class="vital_data_panel">
                  <div class="vital_data_left_panel">
                    <div class="vital_data_left_sub">
                      <p class="program_data_title">Vitals Monitoring</p>
                      <p class="program_data_value">{{ v.VitalName }}</p>
                    </div>
                    <div class="vital_data_sub__">
                      <p class="program_data_title">Schedule</p>
                      <p class="program_data_value">{{ v.ScheduleName }}</p>
                      <p class="program_data_value vitalschedule">
                        {{ v.VitalScheduleName }}
                      </p>
                      <div class="vital_interval">
                        <p class="program_data_title">Intervals</p>
                        <div class="vital_interval_item_panel">
                          <div
                            class="vital_interval_item"
                            [ngClass]="
                              v.Morning
                                ? 'vital_interval_item_selcted'
                                : 'vital_interval_item_notSelected'
                            "
                          >
                            M
                          </div>

                          <div
                            class="vital_interval_item"
                            [ngClass]="
                              v.Afternoon
                                ? 'vital_interval_item_selcted'
                                : 'vital_interval_item_notSelected'
                            "
                          >
                            AF
                          </div>

                          <div
                            class="vital_interval_item"
                            [ngClass]="
                              v.Evening
                                ? 'vital_interval_item_selcted'
                                : 'vital_interval_item_notSelected'
                            "
                          >
                            E
                          </div>

                          <div
                            class="vital_interval_item"
                            [ngClass]="
                              v.Night
                                ? 'vital_interval_item_selcted'
                                : 'vital_interval_item_notSelected'
                            "
                          >
                            N
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="vital_data_right_panel">
                    <div *ngFor="let d of v.VitalMeasureInfos">
                      <div class="vital_data_right_sub">
                        <div class="vital_sub_measurement">
                          <p class="program_data_title">Measurement</p>
                          <p class="program_data_value">{{ d.MeasureName }}</p>
                        </div>
                        <div class="vital_sub_unit">
                          <p class="program_data_title">Unit</p>
                          <p class="program_data_value">{{ d.UnitName }}</p>
                        </div>
                      </div>
                      <!--   Measurement Panel Start-->
                      <!--   Measurement Panel Start-->
                      <app-sliderdata
                        [low_critical]="d.CriticallMinimum"
                        [low_cautious]="d.CautiousMinimum"
                        [low_normal]="d.NormalMinimum"
                        [high_normal]="d.NormalMaximum"
                        [high_cautious]="d.CautiousMaximum"
                        [high_critical]="d.CriticalMaximum"
                      ></app-sliderdata>

                      <!-- Measurement Panel End -->
                    </div>

                    <!-- Measurement Second Panel -->
                  </div>
                </div>
              </div>
              <!-- <div id="vitalGlucose" *ngIf="v.VitalName=='Glucose'">

                </div>
                <div id="vitalGlucose" *ngIf="v.VitalName=='Glucose'">

                </div> -->
            </div>
          </div>
        </div>
        <!-- Program Vital Schedule End -->
        <!-- ProgramInfo Billing Info Start -->
        <!-- <div #billingInfodata></div> -->
        <div #billingInfodata class="Program_billing">
          <div class="program_detail_title">Billing Information</div>
          <div class="Program_billing_data">
            <div class="Program_billing_data_left">
              <div class="billing_table">
                <mat-table #table [dataSource]="BillingInfo">
                  <ng-container matColumnDef="CPTCode">
                    <mat-header-cell
                      [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }"
                      *matHeaderCellDef
                    >
                      CPTCode</mat-header-cell
                    >
                    <mat-cell *matCellDef="let element">
                      {{ element.CPTCode }}
                    </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="Last_Billing_Cycle">
                    <mat-header-cell class="last-billing-col" *matHeaderCellDef
                      >Last Billing Cycle</mat-header-cell
                    >
                    <mat-cell class="last-billing-col" *matCellDef="let element"
                      ><span>{{
                        element.Last_Billing_Cycle == null
                          ? "Not available"
                          : element.Last_Billing_Cycle
                      }}</span>
                    </mat-cell>
                  </ng-container>

                  <ng-container matColumnDef="reading">
                    <mat-header-cell *matHeaderCellDef>
                      Reading
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                      <span class="span_billing">{{
                        element.CPTCode != "99453" && element.CPTCode != "99454"
                          ? ConvertMinute(element.reading)
                          : element.reading
                      }}</span>
                    </mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="status">
                    <mat-header-cell
                      [ngStyle]="{ 'border-radius': '0px 16px 0px 0px' }"
                      *matHeaderCellDef
                    >
                      Status
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                      {{ element.status }}
                    </mat-cell> </ng-container
                  >s
                  <mat-header-row
                    *matHeaderRowDef="billingTableColumns; sticky: true"
                  ></mat-header-row>
                  <mat-row
                    [style.minHeight.px]="35"
                    *matRowDef="let row; columns: billingTableColumns"
                    [ngClass]="{}"
                  ></mat-row>
                </mat-table>
              </div>
            </div>
            <div class="Program_billing_data_right">
              <div class="available_billing_code_panel">
                <p>Available Billing Codes</p>
                <div *ngIf="billingSrcArray.length > 0">
                  <div *ngFor="let biillItem of billingSrcArray">
                    <div class="checkbox_item">
                      <img
                        class="billing_check_icon"
                        src="../../../../../assets/04-Icons/Icons_Check A.svg"
                      />
                      <p class="billing_value">
                        {{ biillItem.cptcode }} - {{ biillItem.description }}
                      </p>
                    </div>
                  </div>
                </div>
                <div *ngIf="billingSrcArray.length == 0">
                  <p class="insurance_value">Not Available</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- ProgramInfo Billing Info End -->
        <!-- ProgramInfo insurance Info Start -->
        <div class="program_insurance">
          <div class="program_detail_title">Insurance Details</div>
          <div class="Program_insurance_data">
            <div class="Program_insurance_left">
              <p class="insurance_sub_title">Primary Insurance</p>
              <div>
                <p
                  class="insurance_value"
                  *ngIf="
                    http_rpm_patientList.PatientInsurenceDetails
                      .PatientInsurenceInfos.length > 0
                  "
                >
                  {{
                    http_rpm_patientList.PatientInsurenceDetails
                      .PatientInsurenceInfos[0].InsuranceVendorName
                  }}
                </p>
                <p
                  class="insurance_value"
                  *ngIf="
                    http_rpm_patientList.PatientInsurenceDetails
                      .PatientInsurenceInfos.length == 0
                  "
                >
                  Not Avaliable
                </p>
              </div>
            </div>
            <div class="Program_insurance_right">
              <p
                class="insurance_sub_title"
                *ngIf="
                  http_rpm_patientList.PatientInsurenceDetails
                    .PatientInsurenceInfos.length > 1
                "
              >
                Additional Insurance (Optional)
              </p>
              <div>
                <p
                  class="insurance_value"
                  *ngIf="
                    http_rpm_patientList.PatientInsurenceDetails
                      .PatientInsurenceInfos.length > 1
                  "
                >
                  {{
                    http_rpm_patientList.PatientInsurenceDetails
                      .PatientInsurenceInfos[1].InsuranceVendorName
                  }}
                </p>
                <p
                  class="insurance_value"
                  *ngIf="
                    http_rpm_patientList.PatientInsurenceDetails
                      .PatientInsurenceInfos.length > 2
                  "
                >
                  {{
                    http_rpm_patientList.PatientInsurenceDetails
                      .PatientInsurenceInfos[2].InsuranceVendorName
                  }}
                </p>
              </div>
            </div>
          </div>
        </div>
        <!-- ProgramInfo insurance Info End -->
        <div #documentInfodata class="Program_billing">
          <div class="program_detail_title">Documents</div>
          <div class="Program_billing_data">
            <div class="Program_billing_data_left">
              <div class="billing_table">
                <mat-table
                  #table
                  [dataSource]="
                    http_rpm_patientList &&
                    http_rpm_patientList.PatientDocumentDetails
                      .PatientDocumentinfos
                  "
                >
                  <ng-container matColumnDef="DocumentType">
                    <mat-header-cell
                      [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }"
                      *matHeaderCellDef
                    >
                      Document Type
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                      {{ element.DocumentType }}
                    </mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="DocumentName">
                    <mat-header-cell
                      [ngStyle]="{ 'border-radius': '0px 0px 0px 0px' }"
                      *matHeaderCellDef
                    >
                      Document Name
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                      {{ element.DocumentName }}
                    </mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="CreatedOn">
                    <mat-header-cell
                      [ngStyle]="{ 'border-radius': '0px 0px 0px 0px' }"
                      *matHeaderCellDef
                    >
                      Last Updated
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                      {{ convertToLocalTime(element.CreatedOn) }}
                    </mat-cell>
                  </ng-container>
                  <!-- <ng-container matColumnDef="DocumentUNC">
                        <mat-header-cell  [ngStyle]="{'border-radius':'0px 16px 0px 0px'}" *matHeaderCellDef> File </mat-header-cell>
                        <mat-cell *matCellDef="let element"> <a [href]="element.DocumentUNC" target="_blank" rel="noopener noreferrer"> File  </a>
                        </mat-cell>
                        </ng-container> -->
                  <ng-container matColumnDef="DocumentUNC">
                    <mat-header-cell
                      [ngStyle]="{ 'border-radius': '0px 16px 0px 0px' }"
                      *matHeaderCellDef
                    >
                      File
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                      <!-- <button (click)="openPdf(element.DocumentUNC)">
                              File
                            </button> -->
                      <img
                        class="noteImg"
                        id="pd_Document_Open"
                        src="../../../../../assets/04-Icons/Icons_Reports.svg"
                        (click)="openPdf(element.DocumentUNC)"
                      />
                      <!-- <div class="iconright">
                        <img
                          class="noteImg"
                          id="pd_Document_Open"
                          src="../../../../../assets/04-Icons/Icons_Delete.svg"
                          (click)="deleteDocument(element.Id)"
                        />
                      </div> -->
                    </mat-cell>
                  </ng-container>
                  <mat-header-row
                    *matHeaderRowDef="documentTableColumns; sticky: true"
                  ></mat-header-row>
                  <mat-row
                    [style.minHeight.px]="35"
                    *matRowDef="let row; columns: documentTableColumns"
                    [ngClass]="{}"
                  ></mat-row>
                </mat-table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- <div #documentInfodata class="program_document">
        <div class="program_detail_title">
          Documents
        </div>
        <div class="program_document_data">
          <div class="program_document_table">
            <app-table [tableData]="documentData" [tableColumns]="DocumentTableColumns">
            </app-table>
          </div>

        </div>

      </div> -->
      <!-- Program Main panel End -->
    </div>
  </div>
</ng-template>

<!-- ng template for Different vital Monitoring -->
<!-- template for Glucose -->
<ng-template #vitalGlucose>
  <div class="vital_data_panel">
    <div class="vital_data_left_panel">
      <div class="vital_data_left_sub">
        <p class="program_data_title">Vitals Monitoring</p>
        <p class="program_data_value">Blood Glucose</p>
      </div>
      <div>
        <p class="program_data_title">Schedule</p>
        <p class="program_data_value">Daily</p>
        <p class="program_data_value">Before & After Food</p>
        <div class="vital_interval">
          <p class="program_data_title">Intervals</p>
          <div class="vital_interval_item_panel">
            <div class="vital_interval_item"></div>
            <div class="vital_interval_item"></div>
            <div class="vital_interval_item"></div>
            <div class="vital_interval_item"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="vital_data_right_panel">
      <div>
        <div class="vital_data_right_sub">
          <div class="vital_sub_measurement">
            <p class="program_data_title">Measurement</p>
            <p class="program_data_value">Glucose Level - Before Meal</p>
          </div>
          <div class="vital_sub_unit">
            <p class="program_data_title">Unit</p>
            <p class="program_data_value">mg/dL</p>
          </div>
        </div>
        <!--   Measurement Panel Start-->
        <!--   Measurement Panel Start-->
        <app-sliderdata></app-sliderdata>

        <!-- Measurement Panel End -->
      </div>

      <!-- Measurement Second Panel -->

      <div>
        <div class="vital_data_right_sub">
          <div class="vital_sub_measurement">
            <p class="program_data_title">Measurement</p>
            <p class="program_data_value">Glucose Level - Before Meal</p>
          </div>
          <div class="vital_sub_unit">
            <p class="program_data_title">Unit</p>
            <p class="program_data_value">mg/dL</p>
          </div>
        </div>
        <!--   Measurement Panel Start-->
        <app-sliderdata></app-sliderdata>

        <!-- Measurement Panel End -->
      </div>
    </div>
  </div>
</ng-template>
<ng-template #vitalPressure>
  <div class="vital_data_panel">
    <div class="vital_data_left_panel">
      <div class="vital_data_left_sub">
        <p class="program_data_title">Vitals Monitoring</p>
        <p class="program_data_value vital_name_data">Blood Glucose</p>
      </div>
      <div>
        <p class="program_data_title">Schedule</p>
        <p class="program_data_value vital_name_data">Daily</p>
        <p class="program_data_value vital_name_data">Before & After Food</p>
        <div class="vital_interval vital_name_data">
          <p class="program_data_title">Intervals</p>
          <div class="vital_interval_item_panel">
            <div class="vital_interval_item"></div>
            <div class="vital_interval_item"></div>
            <div class="vital_interval_item"></div>
            <div class="vital_interval_item"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="vital_data_right_panel">
      <div>
        <div class="vital_data_right_sub">
          <div class="vital_sub_measurement">
            <p class="program_data_title">Measurement</p>
            <p class="program_data_value">Glucose Level - Before Meal</p>
          </div>
          <div class="vital_sub_unit">
            <p class="program_data_title">Unit</p>
            <p class="program_data_value">mg/dL</p>
          </div>
        </div>
        <!--   Measurement Panel Start-->
        <!--   Measurement Panel Start-->
        <app-sliderdata></app-sliderdata>

        <!-- Measurement Panel End -->
      </div>

      <!-- Measurement Second Panel -->

      <div>
        <div class="vital_data_right_sub">
          <div class="vital_sub_measurement">
            <p class="program_data_title">Measurement</p>
            <p class="program_data_value">Glucose Level - Before Meal</p>
          </div>
          <div class="vital_sub_unit">
            <p class="program_data_title">Unit</p>
            <p class="program_data_value">mg/dL</p>
          </div>
        </div>
        <!--   Measurement Panel Start-->
        <app-sliderdata></app-sliderdata>

        <!-- Measurement Panel End -->
      </div>
    </div>
  </div>
</ng-template>

<!-- Program Info Template Main Third Menu End -->
<!-- ***************************************************************************** -->

<!-- Clinic Info Template  Fourth Menu  Start-->
<!-- ################################################################################## -->
<ng-template #clinicInfo>
  <div class="clinicInfo">
    <div class="clinical_main_data_panel">
      <!-- Clinical Menu Start -->
      <div class="clinicalInfo_menu">
        <div *ngFor="let menu_item of clinicInfoMenu; let last = last">
          <button
            [ngClass]="{ 'last-child': last }"
            id="pd_ClinicalInfoMenu"
            class="{{
              clinicalMenuVariable == menu_item.menu_id
                ? 'clinic_current_menu'
                : 'clinicalInfo_menu_item'
            }}"
            (click)="ClinicalInfoMenuSelect(menu_item.menu_id)"
          >
            {{ menu_item.menu_title }}
          </button>
        </div>
      </div>
      <!-- Clinical Menu End -->
      <div class="clinical_detail_data">
        <ng-container [ngSwitch]="clinicalMenuVariable">
          <ng-container *ngSwitchCase="1">
            <ng-container *ngTemplateOutlet="vitalReadingsInfo"></ng-container>
          </ng-container>
          <ng-container *ngSwitchCase="2">
            <ng-container *ngTemplateOutlet="healthTrendInfo"></ng-container>
          </ng-container>
          <ng-container *ngSwitchCase="3">
            <ng-container *ngTemplateOutlet="medicationInfo"></ng-container>
          </ng-container>
          <ng-container *ngSwitchCase="4">
            <ng-container *ngTemplateOutlet="symptomsInfo"></ng-container>
          </ng-container>
          <ng-container *ngSwitchCase="5">
            <ng-container *ngTemplateOutlet="uploadInfo"></ng-container>
          </ng-container>
          <ng-container *ngSwitchDefault>
            <ng-container *ngTemplateOutlet="vitalReadingsInfo"></ng-container>
          </ng-container>
        </ng-container>
      </div>
    </div>
  </div>
</ng-template>

<!-- Sub Templates for Clinical activity  Fourth Main Menu-->
<!-- VitalReadingInfo Start  Clinical activity First  Sub-Menu  -->
<ng-template #vitalReadingsInfo>
  <div class="vitalReadingsInfo_panel">
    <div class="vitalReadingupper_panel">
      <div class="vitalReadings">
        <div
          class="vitalReadingsMenu"
          *ngIf="ProcessVitalData">
          <button
            class="vitalReading_menu_item"
            *ngIf="ProcessVitalData && ProcessVitalData.BloodGlucose != null"
            id="pd_vital_BG"
            (click)="ChangeVitalScreen('BloodGlucose')"
            [ngClass]="{
              'vital_selected_': currentVital === 'BloodGlucose'
            }"
          >
            BloodGlucose
          </button>
          <button
            class="vitalReading_menu_item"
            *ngIf="ProcessVitalData && ProcessVitalData.BloodPressure != null"
            id="pd_Vital_BP"
            (click)="ChangeVitalScreen('BloodPressure')"
            [ngClass]="{
              'vital_selected_': currentVital === 'BloodPressure'
            }"
          >
            BloodPressure
          </button>
          <button
            class="vitalReading_menu_item"
             *ngIf="ProcessVitalData && ProcessVitalData.BloodOxygen != null "
            (click)="ChangeVitalScreen('BloodOxygen')"
            id="pd_Vital_O"
              [ngClass]="{
              'vital_selected_': currentVital === 'BloodOxygen'
            }"
          >
            Oxygen
          </button>
          <button
            class="vitalReading_menu_item"
            *ngIf="ProcessVitalData && ProcessVitalData.Weight != null"
            (click)="ChangeVitalScreen('Weight')"
            id="pd_Vital_W"
             [ngClass]="{
              'vital_selected_': currentVital === 'Weight'
            }"
          >
            Weight
          </button>
        </div>
      </div>

      <div>
        <mat-form-field appearance="outline">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input
            [formGroup]="frmvitalrange"
            [rangePicker]="picker"
          >
            <input
              matStartDate
              formControlName="start"
              placeholder="Start date"
            />
            <input
              matEndDate
              formControlName="end"
              placeholder="End date"
              id="pd_VitaldateRange"
              (dateChange)="rangeVitalScheduleCalc()"
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>
      </div>
    </div>

    <div class="vital_monitoring_table">
      <ng-container [ngSwitch]="currentVital">
        <ng-container *ngSwitchCase="'BloodPressure'">
          <ng-container *ngTemplateOutlet="BloodPressure"></ng-container>
        </ng-container>
        <ng-container *ngSwitchCase="'BloodGlucose'">
          <ng-container *ngTemplateOutlet="BloodGlucose"></ng-container>
        </ng-container>
        <ng-container *ngSwitchCase="'BloodOxygen'">
          <ng-container *ngTemplateOutlet="BloodOxygen"></ng-container>
        </ng-container>
        <ng-container *ngSwitchCase="'Weight'">
          <ng-container *ngTemplateOutlet="Weight"></ng-container>
        </ng-container>
        <ng-container *ngSwitchCase="'None'">
          <div
            *ngIf="
              http_vitalGlucoseData &&
              http_vitalGlucoseData.length > 0 &&
              vital_temporaryData &&
              vital_temporaryData.length == 0
            "
          >
            <ng-container *ngTemplateOutlet="BloodPressure"></ng-container>
          </div>
          <div
            *ngIf="
              http_vitalGlucoseData &&
              http_vitalGlucoseData.length == 0 &&
              vital_temporaryData &&
              vital_temporaryData.length > 0
            "
          >
            <ng-container *ngTemplateOutlet="BloodPressure"></ng-container>
          </div>
          <div
            *ngIf="
              http_vitalGlucoseData &&
              http_vitalGlucoseData.length > 0 &&
              vital_temporaryData &&
              vital_temporaryData.length > 0 &&
              http_VitalOxygen &&
              http_VitalOxygen.length > 0 &&
              http_VitalWight &&
              http_VitalWight.length > 0
            "
          >
            <ng-container *ngTemplateOutlet="BloodPressure"></ng-container>
          </div>
          <div
            *ngIf="
              vital_temporaryData &&
              vital_temporaryData.length == 0 &&
              http_vitalGlucoseData &&
              http_vitalGlucoseData.length > 0 &&
              http_VitalOxygen &&
              http_VitalOxygen.length > 0 &&
              http_VitalWight &&
              http_VitalWight.length > 0
            "
          >
            <ng-container *ngTemplateOutlet="BloodGlucose"></ng-container>
          </div>
          <div
            *ngIf="
              vital_temporaryData &&
              vital_temporaryData.length == 0 &&
              http_vitalGlucoseData &&
              http_vitalGlucoseData.length == 0 &&
              http_VitalOxygen &&
              http_VitalOxygen.length > 0 &&
              http_VitalWight &&
              http_VitalWight.length > 0
            "
          >
            <ng-container *ngTemplateOutlet="BloodOxygen"></ng-container>
          </div>
          <div
            *ngIf="
              vital_temporaryData &&
              vital_temporaryData.length == 0 &&
              http_vitalGlucoseData &&
              http_vitalGlucoseData.length == 0 &&
              http_VitalOxygen &&
              http_VitalOxygen.length == 0 &&
              http_VitalWight &&
              http_VitalWight.length > 0
            "
          >
            <ng-container *ngTemplateOutlet="Weight"></ng-container>
          </div>
        </ng-container>
        <!-- <ng-container *ngSwitchDefault> -->
        <!-- <ng-container *ngTemplateOutlet="defaultScreen(vital_menu_item[0].vital_name)"></ng-container> -->

        <!-- </ng-container> -->
      </ng-container>
    </div>
  </div>
</ng-template>
<!-- VitalReadingInfo  Clinical activity First  Sub-Menu End -->
<!-- Vital Monitoring Sub Template Start -->

<ng-template #BloodPressure>
  <table class="team_detail_schedule">
    <tr>
      <th [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }">
        <img
          class="sort_icon_default"
          src="../../../../../assets/04-Icons/Icons_Sort.svg"
          id="pd_BPvitalSort"
          (click)="sortVitalBPColumn()"
        />Date
      </th>
      <th>Time</th>
      <th [ngStyle]="{ 'padding-left': '0.8rem' }">Systolic</th>
      <th [ngStyle]="{ 'padding-left': '0.8rem' }">Diastolic</th>
      <th [ngStyle]="{ 'padding-left': '1.3rem' }">Pulse</th>
      <th [ngStyle]="{ 'border-radius': '0px 16px 0px 0px' }">Remarks</th>
    </tr>
    <ng-container *ngFor="let vitalitem of vital_temporaryData">
      <ng-container
        *ngFor="
          let vital_data of vitalitem.BloodPressureReadings;
          let index = index
        "
      >
        <tr>
          <td
            class="main_time"
            *ngIf="index === 0"
            [attr.rowspan]="vitalitem.BloodPressureReadings.length"
          >
            <span *ngIf="vitalitem.ReadingDate">{{
              datepipe.transform(vitalitem.ReadingDate, "MMM d, y")
            }}</span>
            <!-- <span *ngIf="vitalitem.ReadingDate">{{vitalitem.ReadingDate}}</span> -->
          </td>
          <td
            *ngIf="vital_data.ReadingTime"
            [ngStyle]="{ 'border-radius': '8px 0px 0px 8px' }"
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodPressureReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodPressureReadings[index].Status == 'Cautious'
            }"
          >
            <!-- {{datepipe.transform(convertToLocalTime(vital_data.ReadingTime),"h:mm a")}} -->
            {{ datepipe.transform(vital_data.ReadingTime, "h:mm a") }}
          </td>
          <td
            class="schedule_type"
            [ngStyle]="{ 'min-width': '30px' }"
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodPressureReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodPressureReadings[index].Status == 'Cautious'
            }"
          >
            <button
              class="systolicbtn"
              id="pd_VitalSystolic"
              [ngClass]="{
                vitalprssureCritical:
                  vitalitem.BloodPressureReadings[index].SystolicStatus ==
                  'Critical',
                vitalprssureCautious:
                  vitalitem.BloodPressureReadings[index].SystolicStatus ==
                  'Cautious',
                vitalprssureNormal:
                  vitalitem.BloodPressureReadings[index].SystolicStatus ==
                  'Normal'
              }"
            >
              {{ vital_data.Systolic }}
            </button>
          </td>
          <td
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodPressureReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodPressureReadings[index].Status == 'Cautious'
            }"
          >
            <button
              class="systolicbtn"
              id="pd_VitalDiastolic"
              [ngClass]="{
                vitalprssureCritical:
                  vitalitem.BloodPressureReadings[index].DiastolicStatus ==
                  'Critical',
                vitalprssureCautious:
                  vitalitem.BloodPressureReadings[index].DiastolicStatus ==
                  'Cautious',
                vitalprssureNormal:
                  vitalitem.BloodPressureReadings[index].DiastolicStatus ==
                  'Normal'
              }"
            >
              {{ vital_data.Diastolic }}
            </button>
          </td>
          <td
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodPressureReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodPressureReadings[index].Status == 'Cautious'
            }"
          >
            <button
              class="btnpulse"
              id="pd_VitalPulse"
              [ngClass]="{
                vitalprssureCritical:
                  vitalitem.BloodPressureReadings[index].pulseStatus ==
                  'Critical',
                vitalprssureCautious:
                  vitalitem.BloodPressureReadings[index].pulseStatus ==
                  'Cautious',
                vitalprssureNormal:
                  vitalitem.BloodPressureReadings[index].pulseStatus == 'Normal'
              }"
            >
              {{ vital_data.Pulse }}
            </button>
          </td>
          <td
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodPressureReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodPressureReadings[index].Status == 'Cautious'
            }"
            [ngStyle]="{ 'border-radius': '0px 8px 8px 0px' }"
          >
            {{ vital_data.Remarks }}
          </td>
        </tr>
      </ng-container>
    </ng-container>
  </table>
</ng-template>

<!-- Glucose Table  Start-->
<ng-template #BloodGlucose>
  <table class="team_detail_schedule">
    <tr>
      <th [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }">
        <img
          class="sort_icon_default"
          src="../../../../../assets/04-Icons/Icons_Sort.svg"
          (click)="sortVitalGlucoseColumn()"
          id="pd_BGvitalSort"
        />Date
      </th>
      <th>Time</th>
      <th>Schedule</th>
      <th *ngIf="http_vitalGlucoseData && http_vitalGlucoseData.length > 0">
        Blood Glucose (mg/dL)
      </th>
      <th [ngStyle]="{ 'border-radius': '0px 16px 0px 0px' }">Remarks</th>
    </tr>
    <ng-container *ngFor="let vitalitem of http_vitalGlucoseData">
      <ng-container
        *ngFor="
          let vital_data of vitalitem.BloodGlucoseReadings;
          let index = index
        "
      >
        <tr>
          <td
            class="main_time"
            *ngIf="index === 0"
            [attr.rowspan]="vitalitem.BloodGlucoseReadings.length"
          >
            <span *ngIf="vitalitem.ReadingDate">{{
              datepipe.transform(vitalitem.ReadingDate, "MMM d, y")
            }}</span>
          </td>
          <td
            [ngStyle]="{ 'border-radius': '8px 0px 0px 8px' }"
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodGlucoseReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodGlucoseReadings[index].Status == 'Cautious'
            }"
          >
            {{ datepipe.transform(vital_data.ReadingTime, "h:mm a") }}
          </td>
          <td
            class="schedule_type"
            [ngStyle]="{ 'min-width': '30px' }"
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodGlucoseReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodGlucoseReadings[index].Status == 'Cautious'
            }"
          >
            {{ vital_data.Schedule }}
          </td>
          <td
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodGlucoseReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodGlucoseReadings[index].Status == 'Cautious'
            }"
          >
            <button
              class="systolicbtn"
              [ngClass]="{
                vitalprssureCritical:
                  vitalitem.BloodGlucoseReadings[index].Status == 'Critical',
                vitalprssureCautious:
                  vitalitem.BloodGlucoseReadings[index].Status == 'Cautious',
                vitalprssureNormal:
                  vitalitem.BloodGlucoseReadings[index].Status == 'Normal'
              }"
              id="pd_VitalBGmgdl"
            >
              {{ vital_data.BGmgdl }}
            </button>
          </td>
          <td
            class="remark_column"
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodGlucoseReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodGlucoseReadings[index].Status == 'Cautious'
            }"
            [ngStyle]="{ 'border-radius': '0px 8px 8px 0px' }"
          >
            {{ vital_data.Remarks }}
          </td>
        </tr>
      </ng-container>
    </ng-container>
  </table>
</ng-template>

<!-- Glucose Table  End-->

<ng-template #BloodOxygen>
  <table class="team_detail_schedule">
    <tr>
      <th [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }">
        <img
          class="sort_icon_default"
          src="../../../../../assets/04-Icons/Icons_Sort.svg"
          id="pd_OvitalSort"
          (click)="sortOxygenColumn()"
        />Date
      </th>
      <th>Time</th>
      <th [ngStyle]="{ 'padding-left': '1rem' }">Oxygen</th>
      <th [ngStyle]="{ 'padding-left': '1rem' }">Pulse</th>

      <th [ngStyle]="{ 'border-radius': '0px 16px 0px 0px' }">Remarks</th>
    </tr>
    <ng-container *ngFor="let vitalitem of http_VitalOxygen">
      <ng-container
        *ngFor="
          let vital_data of vitalitem.BloodOxygenReadings;
          let index = index
        "
      >
        <tr>
          <td
            class="main_time"
            *ngIf="index === 0"
            [attr.rowspan]="vitalitem.BloodOxygenReadings.length"
          >
            <span>{{
              datepipe.transform(vitalitem.ReadingDate, "MMM d, y")
            }}</span>
          </td>
          <td
            [ngStyle]="{ 'border-radius': '8px 0px 0px 8px' }"
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodOxygenReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodOxygenReadings[index].Status == 'Cautious'
            }"
          >
            {{ datepipe.transform(vital_data.ReadingTime, "h:mm a") }}
          </td>
          <td
            class="schedule_type"
            [ngStyle]="{ 'min-width': '30px' }"
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodOxygenReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodOxygenReadings[index].Status == 'Cautious'
            }"
          >
            <button
              class="systolicbtn"
              id="pd_VitalOxygen"
              [ngClass]="{
                vitalprssureCritical:
                  vitalitem.BloodOxygenReadings[index].OxygenStatus ==
                  'Critical',
                vitalprssureCautious:
                  vitalitem.BloodOxygenReadings[index].OxygenStatus ==
                  'Cautious',
                vitalprssureNormal:
                  vitalitem.BloodOxygenReadings[index].OxygenStatus == 'Normal'
              }"
            >
              {{ vital_data.Oxygen }}
            </button>
          </td>
          <td
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodOxygenReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodOxygenReadings[index].Status == 'Cautious'
            }"
          >
            <button
              class="systolicbtn"
              id="pd_VitalPulseOx"
              [ngClass]="{
                vitalprssureCritical:
                  vitalitem.BloodOxygenReadings[index].PulseStatus ==
                  'Critical',
                vitalprssureCautious:
                  vitalitem.BloodOxygenReadings[index].PulseStatus ==
                  'Cautious',
                vitalprssureNormal:
                  vitalitem.BloodOxygenReadings[index].PulseStatus == 'Normal'
              }"
            >
              {{ vital_data.Pulse }}
            </button>
          </td>

          <td
            [ngClass]="{
              vitalCritical:
                vitalitem.BloodOxygenReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.BloodOxygenReadings[index].Status == 'Cautious'
            }"
            [ngStyle]="{ 'border-radius': '0px 8px 8px 0px' }"
          >
            {{ vital_data.Remarks }}
          </td>
        </tr>
      </ng-container>
    </ng-container>
  </table>
</ng-template>

<ng-template #Weight>
  <table class="team_detail_schedule">
    <tr>
      <th [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }">
        <img
          class="sort_icon_default"
          src="../../../../../assets/04-Icons/Icons_Sort.svg"
          id="pd_WvitalSort"
          (click)="sortWeightColumn()"
        />Date
      </th>
      <th>Time</th>
      <th>Weight(Lbs)</th>
      <th [ngStyle]="{ 'border-radius': '0px 16px 0px 0px' }">Remarks</th>
    </tr>
    <ng-container *ngFor="let vitalitem of http_VitalWight">
      <ng-container
        *ngFor="let vital_data of vitalitem.WeightReadings; let index = index"
      >
        <tr>
          <td
            class="main_time"
            *ngIf="index === 0"
            [attr.rowspan]="vitalitem.WeightReadings.length"
          >
            <span>{{
              datepipe.transform(vitalitem.ReadingDate, "MMM d, y")
            }}</span>
          </td>
          <td
            [ngStyle]="{ 'border-radius': '8px 0px 0px 8px' }"
            [ngClass]="{
              vitalCritical:
                vitalitem.WeightReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.WeightReadings[index].Status == 'Cautious'
            }"
          >
            {{ datepipe.transform(vital_data.ReadingTime, "h:mm a") }}
          </td>

          <td
            [ngClass]="{
              vitalCritical:
                vitalitem.WeightReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.WeightReadings[index].Status == 'Cautious'
            }"
          >
            <button
              class="systolicbtn"
              id="pd_VitalBWlbs"
              [ngClass]="{
                vitalprssureCritical:
                  vitalitem.WeightReadings[index].Status == 'Critical',
                vitalprssureCautious:
                  vitalitem.WeightReadings[index].Status == 'Cautious',
                vitalprssureNormal:
                  vitalitem.WeightReadings[index].Status == 'Normal'
              }"
            >
              {{ vital_data.BWlbs }}
            </button>
          </td>

          <td
            [ngClass]="{
              vitalCritical:
                vitalitem.WeightReadings[index].Status == 'Critical',
              vitalCautious:
                vitalitem.WeightReadings[index].Status == 'Cautious'
            }"
            [ngStyle]="{ 'border-radius': '0px 8px 8px 0px' }"
          >
            {{ vital_data.Remarks }}
          </td>
        </tr>
      </ng-container>
    </ng-container>
  </table>
</ng-template>

<!-- Vital Monitoring Sub Template End -->
<!-- healthTrendInfo Start Clinical activity Second   Sub-Menu -->
<ng-template #healthTrendInfo>
  <div class="health-panel-btn-ClinicInfo"
    *ngIf="!loading && !loading_two && !loading3 && !loading4
         && patientProgramname != 'CCM'
         && patientProgramname != 'PCM'"
  >
    <p class="patient-detail-panel-heading">Health Trends</p>

   <div class ="health-panel" *ngFor="let chartData of allLineChartData; let i = index">
      <div class="btn-health-panel-ClinicInfo">
        <span>{{ healthtrendVitalNameArray[i] }}</span>
        <div class="date_btn_panel" >
          <button
            class="btn-date_container"
            id="pd_ClinicalHtrend_7"
            (click)="healthtrendsHealthInfo(7, i)"
            [ngClass]="
              heath_trends_frequencies[i] === 7
                ? 'date_selected_'
                : 'date_not_selected'"
          >
            7 days
          </button>
          <button
            class="btn-date_container"
            id="pd_ClinicalHtrend_30"
            (click)="healthtrendsHealthInfo(30, i)"
            [ngClass]="
              heath_trends_frequencies[i] === 30
                ? 'date_selected_'
                : 'date_not_selected'"
          >
            30 days
          </button>
        </div>
      </div>
      <div class="summary_graph_container">
        <div style="display: block; width: 98%; height: 98%" id="pdfData">
          <canvas
            class="charttrends"
            baseChart
            width="1"
            height="1"
            [datasets]="chartData.lineChartData"
            [labels]="chartData.lineChartLabels"
            [options]="lineChartOptions"
            [legend]="lineChartLegend"
            id="pd_ClinicalHtrends"
            [type]="'line'"
          >
          </canvas>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="no_graphdata" *ngIf="!healthtrenddisplay">
    <span>No Graph Data Available</span>
  </div> -->
</ng-template>
<!-- healthTrendInfo End Clinical activity Second Menu  -->
<!-- medication Template  Clinical activity third Sub-Menu Start  -->
<ng-template #medicationInfo>
  <div class="medicationInfoData">
    <div class="medicationInfo_table">
      <div>
        <mat-table #table [dataSource]="dataSourceTable">
          <ng-container matColumnDef="selection">
            <mat-header-cell
              [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }"
              *matHeaderCellDef

            >
            </mat-header-cell>
            <mat-cell *matCellDef="let element; let rowIndex = index">
              <!-- <mat-radio-button
                color="primary"
                name="rhSelectionRadio"
                [value]="rowIndex"
                id="pd_MedRowSelect"
                (click)="selectmedicationRow($event, element)"
                [checked]="element.selected"
              >
              </mat-radio-button> -->

            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Id">
            <mat-header-cell *matHeaderCellDef class="hidden-column">Id </mat-header-cell>
            <mat-cell class="hidden-column" *matCellDef="let element"> {{ element.Id }}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="Medicinename">
            <mat-header-cell *matHeaderCellDef>Medicine Name </mat-header-cell>
            <mat-cell *matCellDef="let element ; let rowIndex = index ">

              <span> {{ element.Medicinename }} </span></mat-cell>
          </ng-container>
          <ng-container matColumnDef="MedicineSchedule">
            <mat-header-cell *matHeaderCellDef> Schedule </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.MedicineSchedule }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Morning">
            <mat-header-cell *matHeaderCellDef class="hidden-column"> </mat-header-cell>
            <mat-cell *matCellDef="let element" class="hidden-column">
              {{ element.Morning }}
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="AfterNoon">
            <mat-header-cell *matHeaderCellDef class="hidden-column"> </mat-header-cell>
            <mat-cell *matCellDef="let element" class="hidden-column">
              {{ element.AfterNoon }}
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="Evening">
            <mat-header-cell *matHeaderCellDef class="hidden-column"> </mat-header-cell>
            <mat-cell *matCellDef="let element" class="hidden-column">
              {{ element.Evening }}
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="Night">
            <mat-header-cell *matHeaderCellDef class="hidden-column"> </mat-header-cell>
            <mat-cell *matCellDef="let element" class="hidden-column"> {{ element.Night }} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="interval">
            <mat-header-cell *matHeaderCellDef>Interval / Day </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <div class="medication_interval_data">
                <div
                  class="{{
                    element.Morning
                      ? 'interval_data_active'
                      : 'interval_data_disable'
                  }}"
                >
                  <div class="interval_data_item">M</div>
                </div>
                <div
                  class="{{
                    element.AfterNoon
                      ? 'interval_data_active'
                      : 'interval_data_disable'
                  }}"
                >
                  <div class="interval_data_item">A</div>
                </div>
                <div
                  class="{{
                    element.Evening
                      ? 'interval_data_active'
                      : 'interval_data_disable'
                  }}"
                >
                  <div class="interval_data_item">E</div>
                </div>
                <div
                  class="{{
                    element.Night
                      ? 'interval_data_active'
                      : 'interval_data_disable'
                  }}"
                >
                  <div class="interval_data_item">N</div>
                </div>
              </div>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="StartDate">
            <mat-header-cell *matHeaderCellDef> Start Date </mat-header-cell>

            <mat-cell *matCellDef="let element">
              <span *ngIf="element.StartDate">{{
                datepipe.transform(element.StartDate, "MMM d,y")
              }}</span>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="EndDate">
            <mat-header-cell *matHeaderCellDef> End Date </mat-header-cell>

            <mat-cell *matCellDef="let element">
              <span *ngIf="element.EndDate">{{
                datepipe.transform(element.EndDate , "MMM d,y")
              }}</span>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Description">
            <mat-header-cell *matHeaderCellDef> Remark </mat-header-cell>
            <mat-cell *matCellDef="let element; let rowIndex = index">{{
              element.Description
            }}</mat-cell>
          </ng-container>

          <!-- Action Column -->
          <div>
            <ng-container matColumnDef="actions">
              <mat-header-cell
                *matHeaderCellDef
                [ngStyle]="{ 'border-radius': '0px 16px 0px 0px' }"
              >
              </mat-header-cell>
              <mat-cell *matCellDef="let element" let rowIndex="index;">
                <!-- <div
                  class="{{ element.selected ? 'displayIcon' : 'hideIcon' }}"
                > -->
                  <div class="front_img_container">
                    <img
                      class="front_img"
                      src="../../../../../assets/04-Icons/Icons_Edit.svg"
                      id="pd_MedEdit"
                      (click)="getMedicationData(element)"
                    />
                  </div>
                  <!-- <div class="front_img_container">
                      <img class="front_img"  src="../../../../../assets/04-Icons/Icons_Delete.svg"  (click)="delete(element.position)"  />
                      </div> -->
                <!-- </div> -->
              </mat-cell>
            </ng-container>
          </div>

          <mat-header-row
            *matHeaderRowDef="displayedMedicationColumns"
          ></mat-header-row>
          <mat-row
            *matRowDef="let row; columns: displayedMedicationColumns"
          ></mat-row>
        </mat-table>
        <mat-paginator
          [length]="http_medication_data ? total_number : 0"
          [pageSize]="8"
          [pageIndex]="0"
        >
        </mat-paginator>
      </div>
    </div>
  </div>
</ng-template>

<!-- medication Template  Clinical activity  Sub-Menu   End -->
<!-- Symtoms Template  Clinical activity Fourth Sub-Menu Start -->
<ng-template #symptomsInfo>
  <div class="symtomsInfoData">
    <div class="symtoms_table">
      <div>
        <mat-table #table [dataSource]="dataSourceTable">
          <ng-container matColumnDef="selection">
            <mat-header-cell
            class="hidden-column"
              *matHeaderCellDef
              [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }"
            >
            </mat-header-cell>
            <mat-cell *matCellDef="let element; let rowIndex = index" class="hidden-column">

              <!-- <mat-radio-button
                color="primary"
                name="rhSelectionRadio"
                [value]="rowIndex"
                id="pd_SymRowSelect"
                (click)="selectSymtomRow($event, element)"
                [checked]="element.selected"
              >
              </mat-radio-button> -->
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Id">
            <mat-header-cell class="hidden-column" *matHeaderCellDef> Id </mat-header-cell>
            <mat-cell class="hidden-column" *matCellDef="let element"> {{ element.Id }}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="Symptom">
            <mat-header-cell *matHeaderCellDef> Symptoms </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.Symptom }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Description">
            <mat-header-cell *matHeaderCellDef> Description </mat-header-cell>
            <mat-cell *matCellDef="let element"
              ><div class="symptomsdescr">
                {{ element.Description }}
              </div></mat-cell
            >
          </ng-container>

          <ng-container matColumnDef="SymptomStartDateTime">
            <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <span *ngIf="element.SymptomStartDateTime">{{
                datepipe.transform(
                  convertToLocalTime(element.SymptomStartDateTime),
                  "MMM d, y"
                )
              }}</span>
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="time">
            <mat-header-cell *matHeaderCellDef> Time </mat-header-cell>,
            <mat-cell *matCellDef="let element">
              <span *ngIf="element.SymptomStartDateTime">{{
                datepipe.transform(
                  convertToLocalTime(element.SymptomStartDateTime),
                  "h:mm a"
                )
              }}</span>
            </mat-cell>
          </ng-container>
          <div>
            <ng-container matColumnDef="action">
              <mat-header-cell
                *matHeaderCellDef
                [ngStyle]="{ 'border-radius': '0px 16px 0px 0px' }"
              >
              </mat-header-cell>
              <mat-cell *matCellDef="let element" let rowIndex="index;">
                <!-- <div
                  class="{{ element.selected ? 'displayIcon' : 'hideIcon' }}"
                > -->
                  <div class="front_img_container">
                    <img
                      class="front_img"
                      src="../../../../../assets/04-Icons/Icons_Edit.svg"
                      id="pd_SymEdit"
                      (click)="editSymptoms(element)"
                    />
                  </div>

              </mat-cell>
            </ng-container>
          </div>

          <mat-header-row
            *matHeaderRowDef="symtomsTableColumn"
          ></mat-header-row>
          <mat-row *matRowDef="let row; columns: symtomsTableColumn"></mat-row>
        </mat-table>
        <mat-paginator
          [length]="http_get_symptoms ? total_number : 0"
          [pageSize]="5"
          [pageIndex]="0"
        >
        </mat-paginator>
      </div>
    </div>
  </div>
</ng-template>

<!-- Symtoms Template Clinical activity Fourth Sub-Menu  End-->
<ng-template #uploadInfo>
  <div class="uploadInfoData">
    <div class="uploadInfo_table">
      <div class="example-container mat-elevation-z8">
        <mat-table #table [dataSource]="dataSource">
          <ng-container matColumnDef="selection">
            <mat-header-cell *matHeaderCellDef> </mat-header-cell>
            <mat-cell *matCellDef="let element; let rowIndex = index">
              <mat-radio-button
                color="primary"
                name="rhSelectionRadio"
                id="pd_UploadInfoRowSelect"
                [value]="rowIndex"
                (click)="selectRow($event, element)"
                [checked]="element.selected"
              >
              </mat-radio-button>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Symptom">
            <mat-header-cell *matHeaderCellDef> Document type </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.Symptom }}</mat-cell
            >
          </ng-container>

          <ng-container matColumnDef="Description">
            <mat-header-cell *matHeaderCellDef> Description </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.Description }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Date">
            <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.Date }} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Time">
            <mat-header-cell *matHeaderCellDef> Time </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.Time }} </mat-cell>
          </ng-container>

          <div>
            <ng-container matColumnDef="actions">
              <mat-header-cell *matHeaderCellDef>Report </mat-header-cell>
              <mat-cell *matCellDef="let element" let rowIndex="index;">
                <div>
                  <button
                    mat-icon-button
                    matTooltip="Click to Edit"
                    id="pd_UploadInfoPrint"
                    class="iconbutton"
                    color="primary"
                    (click)="clickDocument(element.rowIndex)"
                  >
                    <mat-icon>print</mat-icon>
                  </button>
                </div>
              </mat-cell>
            </ng-container>
          </div>

          <mat-header-row
            *matHeaderRowDef="displayedSymtomColumns"
          ></mat-header-row>
          <mat-row
            *matRowDef="let row; columns: displayedSymtomColumns"
          ></mat-row>
        </mat-table>
      </div>
    </div>
  </div>
</ng-template>
<!-- Sub Templates for Clinical  Fourth activity End  -->
<!-- ***************************************************************************** -->
<!-- activity Info Template 5 th Main Menu Start  -->
<!-- ################################################################################## -->
<ng-template #activityInfo>
  <div class="activityInfo">
    <div class="activityInfo_main_panel">
      <div class="activityInfo_data_panel">
        <!-- Activity Menu Start -->
        <div class="activityInfo_menu">
          <div *ngFor="let menu_item of activityInfoMenu; let last = last">
            <button
              [ngClass]="{ 'last-child': last }"
              class="{{
                activityMenuVariable == menu_item.menu_id
                  ? 'activityInfo_item_active'
                  : 'activityInfo_item'
              }}"
              id="pd_ActivityInfoMenu"
              (click)="activityInfoMenuSelect(menu_item.menu_id)"
              style="position: relative; z-index: 200"
            >
              {{ menu_item.menu_title }}
            </button>
          </div>
        </div>
        <!-- Activity Menu End -->
        <div class="acivity_detail_data">
          <ng-container [ngSwitch]="activityMenuVariable">
            <ng-container *ngSwitchCase="1">
              <ng-container
                *ngTemplateOutlet="activityInfoSchedule"
              ></ng-container>
            </ng-container>
            <ng-container *ngSwitchCase="2">
              <ng-container *ngTemplateOutlet="activityAlert"></ng-container>
            </ng-container>
            <ng-container *ngSwitchCase="3">
              <ng-container *ngTemplateOutlet="activityInfoCall"></ng-container>
            </ng-container>
            <ng-container *ngSwitchCase="4">
              <ng-container
                *ngTemplateOutlet="activityInfoReview"
              ></ng-container>
            </ng-container>
            <ng-container *ngSwitchCase="5">
              <ng-container *ngTemplateOutlet="activityInfoChat"></ng-container>
            </ng-container>
            <ng-container *ngSwitchCase="6">
              <ng-container *ngTemplateOutlet="activityInfoSMS"></ng-container>
            </ng-container>
            <ng-container *ngSwitchCase="7">
              <ng-container
                *ngTemplateOutlet="activityInfogoalStatus"
              ></ng-container>
            </ng-container>
            <ng-container *ngSwitchDefault>
              <ng-container
                *ngTemplateOutlet="activityInfoSchedule"
              ></ng-container>
            </ng-container>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!-- Activity 5 th Main Menu Sub Menu Template -->

<!-- Activity 5 th Main Menu - Sub Menu  Schedules Template Start -->
<ng-template #activityInfoSchedule>
  <div class="activityInfoSchedule">
    <div class="task_date_panel">
      <div>
        <mat-form-field appearance="outline">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input
            [formGroup]="frmactivitySchedulerange"
            [rangePicker]="picker"
          >
            <input
              matStartDate
              formControlName="start"
              id="pd_ActivityStart"
              placeholder="Start date"
            />
            <input
              matEndDate
              formControlName="end"
              id="pd_ActivityEnd"
              placeholder="End date"
              (dateChange)="getScheduleData(true)"
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>
      </div>
    </div>
    <div class="schedule_table_container">
      <table class="team_detail_schedule">
        <tr>
          <th [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }">
            <img
              class="sort_icon_default"
              src="../../../../../assets/04-Icons/Icons_Sort.svg"
              (click)="ScheduleSort()"
              id="pd_Sch_Sort"
            />Date
          </th>
          <th>Time</th>
          <th>Schedule Type</th>
          <th>Description</th>
          <th>Assigned Member</th>
          <th [ngStyle]="{ 'border-radius': '0px 16px 0px 0px' }"></th>
        </tr>
        <ng-container *ngFor="let scheduleitem of http_ActivityScheduleData">
          <ng-container
            *ngFor="
              let schedule_data of scheduleitem.SchedueInfos;
              let index = index
            "
          >
            <tr [ngStyle]="{ 'background-color': '#EDEFF5' }">
              <td
                class="main_time"
                *ngIf="index === 0"
                [attr.rowspan]="scheduleitem.SchedueInfos.length"
              >
                {{ datepipe.transform(scheduleitem.ScheduleDate, "MMM d, y") }}
              </td>
              <td [ngStyle]="{ 'border-radius': '8px 0px 0px 8px' }">
                {{ schedule_data.ScheduleTime }}
              </td>
              <td class="schedule_type">
                {{ schedule_data.ScheduleType }}
              </td>
              <td>
                {{ schedule_data.Description }}
              </td>
              <td>
                {{ schedule_data.AssignedByName }}
              </td>
              <!-- <td *ngIf="userid!=schedule_data.AssignedBy">

                {{ schedule_data.AssignedByName}}
              </td> -->
              <td [ngStyle]="{ 'border-radius': '0px 8px 8px 0px' }">
                <div class="schedule_action_panel">
                  <button
                    class="iconbutton"
                    id="pd_OpenSch"
                    (click)="openSchedulebyId(schedule_data.CurrentScheduleId)"
                  >
                    <img
                      class="front_img"
                      src="../../../../../../assets/04-Icons/Icons_Arrow - Front.svg"
                    />
                  </button>
                  <input
                    type="checkbox"
                    [attr.disabled]="schedule_data.IsCompleted ? true : null"
                    [checked]="schedule_data.IsCompleted"
                    id="pd_CompleteSch"
                    (change)="
                      scheduleComplete($event, schedule_data.CurrentScheduleId)
                    "
                  />
                  <!-- <input type="checkbox" (change)="scheduleComplete($event,data_item.CurrentScheduleId)" /> -->
                </div>
              </td>
            </tr>
          </ng-container>
        </ng-container>
      </table>
    </div>
    <div
      class="complete_schedule"
      *ngIf="http_ActivityScheduleData && http_ActivityScheduleData.length > 0"
    >
      <!-- btn_save -->
      <button class="addCommonBtn" id="pd_SaveSch" (click)="saveCompleteTask()">
        Save
      </button>
    </div>
  </div>
</ng-template>
<!-- Activity 5 th Main Menu - Sub Menu  Schedules Template End -->
<!-- Activity 5 th Main Menu - Sub Menu  Alerts And Tasks Template Start -->
<ng-template #activityAlert>
  <div class="activityAlertTemp">
    <div class="task_date_panel">
      <div>
        <mat-form-field appearance="outline">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input
            [formGroup]="frmactivityAlertrange"
            [rangePicker]="picker"
          >
            <input
              matStartDate
              formControlName="start"
              id="pd_AtyStartDate"
              placeholder="Start date"
            />
            <!-- <input matEndDate formControlName="end" placeholder="End date" (dateChange)="rangeActivityAlertCalc()"/> -->
            <input
              matEndDate
              formControlName="end"
              placeholder="End date"
              id="pd_AtyEndDate"
              (dateChange)="getalertTask()"
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>
      </div>
    </div>

    <div *ngIf="http_ActivityAlertTask" class="activityInfoAlert_table">
      <div>
        <mat-table #table [dataSource]="dataSourceTable" matSort>
          <ng-container matColumnDef="Id">
            <mat-header-cell
              [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }"
              *matHeaderCellDef
              class="hidden-column"
            >
            </mat-header-cell>
            <mat-cell *matCellDef="let element"    class="hidden-column"> {{ element.Id }}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="Type">
            <mat-header-cell       [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }" *matHeaderCellDef> Task Type </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.Type }} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="TaskOrAlert">
            <mat-header-cell *matHeaderCellDef    class="hidden-column"> </mat-header-cell>
            <mat-cell    class="hidden-column" *matCellDef="let element">
              {{ element.TaskOrAlert }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Priority">
            <mat-header-cell *matHeaderCellDef>
              <div class="task_priority">
                <select
                  [(ngModel)]="priorityTaskFilterValue"
                  [ngModelOptions]="{ standalone: true }"
                  id="pd_TaskPriorityFilter"
                  (ngModelChange)="PrirotyTaskFilterResult($event)"
                >
                  <option value="undefined">Priority</option>
                  <option value="3">High</option>
                  <option value="4">Medium</option>
                  <option value="5">Low</option>
                  <option value="6">Critical</option>
                  <option value="7">Severe</option>
                  <option value="8">Moderate</option>
                  <!-- <option value="8">Cautious</option> -->
                </select>
              </div></mat-header-cell
            >

            <mat-cell *matCellDef="let element">
              <div
                *ngIf="element.TaskOrAlert == 'Task'"
                class="priority_content"
                [ngClass]="{
                  priority_low_table: element.Priority == 'Low',
                  priority_high_table: element.Priority == 'High',
                  priority_medium_table: element.Priority == 'Medium',
                  priority_urgent_table: element.Priority == 'Urgent'
                }"
              >
                {{ element.Priority }}
              </div>
              <div
                *ngIf="element.TaskOrAlert == 'Alert'"
                class="priority_content"
                [ngClass]="{
                  priority_low_table: element.Priority == 'Low',
                  priority_medium_table:
                    element.Priority == 'Severe' ||
                    element.Priority == 'Cautious',
                  priority_urgent_table: element.Priority == 'Critical',
                  priority_missing: element.Priority == 'Moderate'
                }"
              >
                {{ element.Priority }}
              </div>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="CreatedBy">
            <mat-header-cell *matHeaderCellDef> Created By </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.CreatedBy }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="AssignedMember">
            <mat-header-cell *matHeaderCellDef>
              Assigned Member
            </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.AssignedMember }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="DueDate">
            <mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="hide-arrow"
              >Due Date
            </mat-header-cell>

            <mat-cell *matCellDef="let element"
              ><span *ngIf="element.DueDate">{{
                datepipe.transform(
                  convertToLocalTime(element.DueDate),
                  "MMM d, y"
                )
              }}</span>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Status">
            <mat-header-cell *matHeaderCellDef>
              <div class="task_priority">
                <select
                  [(ngModel)]="selectedStatusValue"
                  [ngModelOptions]="{ standalone: true }"
                  (ngModelChange)="PrirotyTaskFilterResult($event)"
                  id="pd_TaskFilter"
                >
                  <option value="undefined">Status</option>
                  <option value="ToDo">ToDo</option>
                  <option value="Completed">Completed</option>
                  <option value="InProgress">InProgress</option>
                </select>
              </div>
            </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.Status }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="action">
            <mat-header-cell
              [ngStyle]="{ 'border-radius': '0px 16px 0px 0px' }"
              *matHeaderCellDef
            >
            </mat-header-cell>
            <mat-cell *matCellDef="let element"
              ><img
                src="../../../../../assets/04-Icons/Icons_Watcher A.svg"
                class="noteIcon"
                id="pd_ViewTask"
                (click)="getUpdateTaskAndAlertValue(element)"
              />
            </mat-cell>
          </ng-container>

          <mat-header-row
            *matHeaderRowDef="ActivityTaskColumnHeader; sticky: true"
          ></mat-header-row>
          <mat-row
            [style.minHeight.px]="35"
            *matRowDef="let row; columns: ActivityTaskColumnHeader"
            [ngClass]="{
              priority_critical: row.Priority == 'Critical'
            }"
          ></mat-row>
        </mat-table>
      </div>
    </div>
  </div>
</ng-template>
<!-- Activity 5 th Main Menu - Sub Menu  Alerts And Tasks Template End -->
<!-- Activity 5 th Main Menu - Sub Menu  Calls Template Start -->
<ng-template #activityInfoCall>
  <div class="activityInfoCallData">
    <div class="task_date_panel">
      <div>
        <mat-form-field appearance="outline">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input
            [formGroup]="frmactivityCallrange"
            [rangePicker]="picker"
          >
            <input
              matStartDate
              formControlName="start"
              placeholder="Start date"
              id="pd_CallStartdate"
            />
            <input
              matEndDate
              formControlName="end"
              placeholder="End date"
              id="pd_CallEnddate"
              (dateChange)="getCallNotes()"
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>
      </div>
    </div>
    <div class="activityInfoCall_table">
      <div *ngIf="http_CallNotesData">
        <mat-table #table [dataSource]="dataSourceTable">
          <ng-container matColumnDef="Id">
            <mat-header-cell
            class="hidden-column"
              *matHeaderCellDef
            >
            </mat-header-cell>
            <mat-cell   class="hidden-column" *matCellDef="let element"> {{ element.Id }}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="NoteType">
            <mat-header-cell  [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }" *matHeaderCellDef> All Calls </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <div class="all-call-type-section">
                {{ element.NoteType }}
              </div>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Duration">
            <mat-header-cell *matHeaderCellDef> Call Duration </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ timeConvert(element.Duration) }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Date">
            <mat-header-cell *matHeaderCellDef>Date </mat-header-cell>
            <mat-cell *matCellDef="let element"
              ><span *ngIf="element.CreatedOn">{{
                datepipe.transform(
                  convertToLocalTime(element.CreatedOn),
                  "MMM d, yyyy"
                )
              }}</span></mat-cell
            >
          </ng-container>

          <ng-container matColumnDef="Time">
            <mat-header-cell *matHeaderCellDef>Time </mat-header-cell>
            <mat-cell *matCellDef="let element"
              ><span>{{
                datepipe.transform(
                  convertToLocalTime(element.CreatedOn),
                  "h:mm a"
                )
              }}</span></mat-cell
            >
          </ng-container>

          <ng-container matColumnDef="CompletedBy">
            <mat-header-cell *matHeaderCellDef> Completed By </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.CompletedBy }}
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="CallType">
            <mat-header-cell *matHeaderCellDef> Call Type </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.CallType }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Notes">
            <mat-header-cell
              [ngStyle]="{ 'border-radius': '0px 16px 0px 0px' }"
              *matHeaderCellDef
            >
              Notes
            </mat-header-cell>
            <mat-cell *matCellDef="let element"
              ><img
                src="../../../../../assets/04-Icons/Icons_Notes A.svg"
                id="pd_GetCallNotes"
                (click)="getCallnotedata(element)"
                class="noteIcon"
              />
            </mat-cell>
          </ng-container>

          <mat-header-row
            *matHeaderRowDef="CallNotesColumnHeader"
          ></mat-header-row>
          <mat-row
            [style.minHeight.px]="30"
            *matRowDef="let row; columns: CallNotesColumnHeader"
          ></mat-row>
        </mat-table>
      </div>
    </div>
  </div>
</ng-template>
<!-- Activity 5 th Main Menu - Sub Menu  calls Template End -->
<!-- Activity 5 th Main Menu - Sub Menu  Review Template Start -->
<ng-template #activityInfoReview>
  <div class="activityInfoReviewData">
    <div class="task_date_panel">
      <div>
        <mat-form-field appearance="outline">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input
            [formGroup]="frmactivityReviewrange"
            [rangePicker]="picker"
          >
            <input
              matStartDate
              formControlName="start"
              placeholder="Start date"
              id="pd_ReviewStartDate"
            />
            <input
              matEndDate
              formControlName="end"
              placeholder="End date"
              id="pd_ReviewEndDate"
              (dateChange)="getreviewData()"
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>
      </div>
    </div>
    <div class="activityInfoReview_table">
      <div>
        <mat-table #table [dataSource]="dataSourceTable">
          <ng-container matColumnDef="Id">
            <mat-header-cell

              *matHeaderCellDef
              class="hidden-column"
            >
            </mat-header-cell>
            <mat-cell class="hidden-column" *matCellDef="let element"> {{ element.Id }}</mat-cell>
          </ng-container>
          <ng-container matColumnDef="NoteType">
            <mat-header-cell       [ngStyle]="{ 'border-radius': '16px 0px 0px 0px' }" *matHeaderCellDef> Note Type </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.NoteType }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Duration">
            <mat-header-cell *matHeaderCellDef> Duration </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ timeConvert(element.Duration) }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Date">
            <mat-header-cell *matHeaderCellDef>Date </mat-header-cell>
            <mat-cell *matCellDef="let element"
              ><span *ngIf="element.CreatedOn">{{
                datepipe.transform(
                  convertToLocalTime(element.CreatedOn),
                  "MMM d, y"
                )
              }}</span></mat-cell
            >
          </ng-container>

          <ng-container matColumnDef="Time">
            <mat-header-cell *matHeaderCellDef>Time </mat-header-cell>
            <mat-cell *matCellDef="let element"
              ><span *ngIf="element.CreatedOn">
                {{
                  datepipe.transform(
                    convertToLocalTime(element.CreatedOn),
                    "h:mm a"
                  )
                }}</span
              ></mat-cell
            >
          </ng-container>

          <ng-container matColumnDef="CompletedBy">
            <mat-header-cell *matHeaderCellDef> Completed By </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.CompletedBy }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Notes">
            <mat-header-cell
              [ngStyle]="{ 'border-radius': '0px 16px 0px 0px' }"
              *matHeaderCellDef
            >
              Notes
            </mat-header-cell>
            <mat-cell *matCellDef="let element"
              ><img
                src="../../../../../assets/04-Icons/Icons_Notes A.svg"
                class="noteIcon"
                id="pd_OpenReviewNote"
                (click)="OpenUpdateNotes(element)"
              />
            </mat-cell>
          </ng-container>

          <mat-header-row
            *matHeaderRowDef="ReviewColumnHeader"
          ></mat-header-row>
          <mat-row
            [style.minHeight.px]="30"
            *matRowDef="let row; columns: ReviewColumnHeader"
          ></mat-row>
        </mat-table>
      </div>
    </div>
  </div>
</ng-template>
<!-- Activity 5 th Main Menu - Sub Menu  Review Template End -->
<!-- Activity 5 th Main Menu - Sub Menu  Chat Template Start -->
<ng-template #activityInfoChat>

  <app-activityinfo-chat [dataSourceTable]="dataSourceTable" [http_chat_data]="http_chatData" [patientname]="http_rpm_patientList&&http_rpm_patientList.PatientDetails.UserName"></app-activityinfo-chat>
</ng-template>
<!-- Activity 5 th Main Menu - Sub Menu  Chat Template End -->
<!-- Activity 5 th Main Menu - Sub Menu  SMS Template Start -->

<ng-template #activityInfoSMS>
  <div class="activityInfoSMS_table">
    <div class="task_date_panel">
      <div>
        <mat-form-field appearance="outline">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input
            [formGroup]="frmactivitysmsrange"
            [rangePicker]="picker"
          >
            <input
              matStartDate
              formControlName="start"
              id="pd_ActivityStart"
              placeholder="Start date"
            />
            <input
              matEndDate
              formControlName="end"
              id="pd_ActivityEnd"
              placeholder="End date"
              (dateChange)="getSMSData(true)"
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>
      </div>
    </div>
    <div>
      <mat-table #table [dataSource]="dataSourceTable">
        <ng-container matColumnDef="Body">
          <mat-header-cell *matHeaderCellDef> Message </mat-header-cell>
          <mat-cell *matCellDef="let element">
            <div class="symptomsdescr">
              {{ element.Body }}
            </div></mat-cell
          >
        </ng-container>

        <ng-container matColumnDef="Date">
          <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
          <mat-cell *matCellDef="let element">
            {{
              datepipe.transform(
                convertToLocalTime(element.SentDate),
                "MMM d, y"
              )
            }}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="Time">
          <mat-header-cell *matHeaderCellDef> Time </mat-header-cell>
          <mat-cell *matCellDef="let element">
            {{
              datepipe.transform(convertToLocalTime(element.SentDate), "h:mm a")
            }}
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="Sender">
          <mat-header-cell *matHeaderCellDef> Sender </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{ element.Sender }} </mat-cell>
        </ng-container>

        <div>
          <ng-container matColumnDef="actions">
            <mat-header-cell *matHeaderCellDef> </mat-header-cell>
            <mat-cell *matCellDef="let element" let rowIndex="index;">
            </mat-cell>
          </ng-container>
        </div>

        <mat-header-row *matHeaderRowDef="displayedSMSColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedSMSColumns"></mat-row>
      </mat-table>
    </div>
  </div>
</ng-template>
<!-- Activity 5 th Main Menu - Sub Menu  SMS Template End -->
<!-- Activity 5 th Main Menu - Sub Menu  Goal Status Template Start -->
<ng-template #activityInfogoalStatus>

</ng-template>
<!-- Activity 5 th Main Menu - Sub Menu  Goal Status Template End -->
<!-- Activity 5 th Main Menu Sub Menu Template End -->

<!-- activity Info Template 5 th Main Menu  End -->
<!-- ***************************************************************************** -->



<ng-template #myPreviewTemp>
  <div class="note-dialog-panel">
    <div>
      <p class="summary_heading">Summary</p>
    </div>
    <div class="change_password_container">
      <div
        class="questionpanel preview_questionpanel"
        *ngFor="let note of QuestionArrayBase; let i = index; let first = first"
      >
        <div *ngIf="note.Question != 'Readings Summary Report'">
          <div class="common_content_title preview_question_title">
            {{ note.Question }}
          </div>

          <div
            class="answer_panel"
            *ngIf="note.AnswerTypes && note.AnswerTypes.length > 0"
          >
            <div
              *ngFor="
                let ans of note.AnswerTypes;
                let i = index;
                let first = first
              "
            >
              <div class="answer_sub">
                <input
                  type="checkbox"
                  id="pd_SummarySelect1"
                  [(ngModel)]="ans.Checked"
                  [ngModelOptions]="{ standalone: true }"
                />
                <p class="answer_descr">{{ ans.Answer }}</p>
              </div>
            </div>
            <div>
              <textarea
                class="extra_note_data"
                id="pd_SummaryExtra1"
                [(ngModel)]="note.Notes"
                [ngModelOptions]="{ standalone: true }"
              >
              </textarea>
            </div>
          </div>
        </div>

        <div class="subquestion_panel" *ngIf="note.SubQuestions.length > 0">
          <div
            *ngFor="
              let question of note.SubQuestions;
              let i = index;
              let first = first
            "
          >
            <div *ngIf="question.Question != 'Readings Summary Report'">
              <p class="common_content_title preview_question_title">
                {{ i + 1 }} : {{ question.Question }}
              </p>
              <div class="answer_panel">
                <div
                  *ngFor="
                    let ans of question.AnswerTypes;
                    let i = index;
                    let first = first
                  "
                >
                  <div class="answer_sub">
                    <input
                      type="checkbox"
                      id="pd_SummarySelect2"
                      [(ngModel)]="ans.Checked"
                    />
                    <p class="answer_descr">{{ ans.Answer }}</p>
                  </div>
                </div>
                <div>
                  <textarea
                    class="extra_note_data"
                    id="pd_SummaryExtra2"
                    [(ngModel)]="question.Notes"
                    [ngModelOptions]="{ standalone: true }"
                  ></textarea>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="note.Question == 'Readings Summary Report'">
          <p class="common_content_title preview_question_title">
            {{ note.Question }}
          </p>
          <div class="answer_panel" *ngIf="note.AnswerTypes.length > 0">
            <p class="vital_descr">
              {{
                http_rpm_patientList &&
                  http_rpm_patientList.PatientProgramdetails
                    .PatientVitalInfos[0].Vital
              }}
            </p>

            <div
              *ngFor="
                let ans of note.AnswerTypes;
                let i = index;
                let first = first
              "
            >
              <div class="answer_sub">
                <input
                  class="answer_check"
                  type="checkbox"
                  id="{{ i }}"
                  [(ngModel)]="ans.Checked"
                  [checked]="ans.Checked"
                  [name]="note.Question"
                  [value]="ans.AnswerId"
                  (click)="isAllSelected($event)"
                  [ngModelOptions]="{ standalone: true }"
                />
                <p class="answer_descr">{{ ans.Answer }}</p>
              </div>
            </div>
            <div>
              <textarea
                class="extra_note_data"
                [(ngModel)]="note.Notes"
                [ngModelOptions]="{ standalone: true }"
              ></textarea>
            </div>
          </div>
        </div>
      </div>

      <p class="common_content_title">Additional Notes</p>
      <div>
        <textarea
          class="additionalNotes"
          [(ngModel)]="additionaNotes"
          id="pd_SummaryAdditionalNote"
          [ngModelOptions]="{ standalone: true }"
        ></textarea>
      </div>
    </div>

    <div class="button_panel note_preview_button_panel">
      <button
        class="btn_cancel"
        id="pd_Summary_Cancel"
        (click)="OnpreviewCancel()"
      >
        CANCEL
      </button>
      <button
        class="btn_save"
        [class.spinner]="loading_note"
        [disabled]="loading_note"
        pd="pd_Summary_Confirm"
        (click)="previewConfirm()"
      >
        CONFIRM
      </button>
    </div>
  </div>
</ng-template>

<ng-template #myPreviewUpdateTemp>
  <div class="dialog">
    <div>
      <p class="summary_heading">Summary</p>
    </div>
    <div class="change_password_container">
      <div
        class="questionpanel preview_questionpanel"
        *ngFor="let note of QuestionArrayBase; let i = index; let first = first"
      >
        <div *ngIf="note.Question != 'Readings Summary Report'">
          <div class="common_content_title preview_question_title">
            {{ note.Question }}
          </div>

          <div
            class="answer_panel"
            *ngIf="note.AnswerTypes && note.AnswerTypes.length > 0"
          >
            <div
              *ngFor="
                let ans of note.AnswerTypes;
                let i = index;
                let first = first
              "
            >
              <div class="answer_sub">
                <input
                  type="checkbox"
                  id="pd_smryUpdate1"
                  [(ngModel)]="ans.Checked"
                  [ngModelOptions]="{ standalone: true }"
                />
                <p class="answer_descr">{{ ans.Answer }}</p>
              </div>
            </div>
            <div>
              <textarea
                class="extra_note_data"
                id="pd_smryUpdateExtra1"
                [(ngModel)]="note.Notes"
                [ngModelOptions]="{ standalone: true }"
              >
              </textarea>
            </div>
          </div>
        </div>

        <div class="subquestion_panel" *ngIf="note.SubQuestions.length > 0">
          <div
            *ngFor="
              let question of note.SubQuestions;
              let i = index;
              let first = first
            "
          >
            <div *ngIf="question.Question != 'Readings Summary Report'">
              <p class="common_content_title preview_question_title">
                {{ i + 1 }} : {{ question.Question }}
              </p>
              <div class="answer_panel">
                <div
                  *ngFor="
                    let ans of question.AnswerTypes;
                    let i = index;
                    let first = first
                  "
                >
                  <div class="answer_sub">
                    <input
                      type="checkbox"
                      id="pd_smryUpdate2"
                      [(ngModel)]="ans.Checked"
                    />
                    <p class="answer_descr">{{ ans.Answer }}</p>
                  </div>
                </div>
                <div>
                  <textarea
                    class="extra_note_data"
                    id="pd_smryUpdateExtra2"
                    [(ngModel)]="question.Notes"
                    [ngModelOptions]="{ standalone: true }"
                  ></textarea>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="note.Question == 'Readings Summary Report'">
          <p class="common_content_title preview_question_title">
            {{ note.Question }}
          </p>
          <div class="answer_panel" *ngIf="note.AnswerTypes.length > 0">
            <p class="vital_descr">{{ this.vitals[0].Vital }}</p>

            <div
              *ngFor="
                let ans of note.AnswerTypes;
                let i = index;
                let first = first
              "
            >
              <div class="answer_sub">
                <input
                  class="answer_check"
                  type="checkbox"
                  id="{{ i }}"
                  [(ngModel)]="ans.Checked"
                  [checked]="ans.Checked"
                  [name]="note.Question"
                  [value]="ans.AnswerId"
                  (click)="isAllSelected($event)"
                  [ngModelOptions]="{ standalone: true }"
                />
                <p class="answer_descr">{{ ans.Answer }}</p>
              </div>
            </div>
            <div>
              <textarea
                class="extra_note_data"
                [(ngModel)]="note.Notes"
                [ngModelOptions]="{ standalone: true }"
              ></textarea>
            </div>
          </div>
        </div>
      </div>

      <p class="common_content_title">Additional Notes</p>
      <div>
        <textarea
          class="additionalNotes"
          id="pd_smryUpdateAdditional"
          [(ngModel)]="additionaNotes"
          [ngModelOptions]="{ standalone: true }"
        ></textarea>
      </div>
    </div>

    <div class="button_panel note_preview_button_panel">
      <button
        class="btn_cancel"
        [mat-dialog-close]="true"
        id="pd_smryUpdateCancel"
        (click)="onPreviewSummaryCancel()"
      >
        CANCEL
      </button>
      <button
        *ngIf="
          this.http_rpm_patientList['PatientDetails'].Status != 'Discharged'
        "
        class="btn_save"
        mat-raised-button
        [class.spinner]="loading_note"
        id="pd_smryUpdateConfirm"
        (click)="previewUpdateConfirm()"
        [disabled]="loading_note"
      >
        CONFIRM
      </button>
    </div>
  </div>
</ng-template>

<ng-template #programRenew>

  <app-program-renew [currentpPatientId]="currentpPatientId" [currentProgramId]="currentProgramId"   (cancelRenew)="Cancelrenew()"></app-program-renew>
</ng-template>
<ng-template #myPreviewPdf>
  <div class="dialogPdf">
    <ngx-extended-pdf-viewer
      [src]="pdfs"
      [useBrowserLocale]="true"
      [textLayer]="true"
      [showHandToolButton]="true"
      [showPresentationModeButton]="true"
      [(page)]="page"
      [(pageLabel)]="pageLabel"
      [showDownloadButton]="true"
      [showOpenFileButton]="false"
      [showPrintButton]="true"
    >
    </ngx-extended-pdf-viewer>
  </div>
</ng-template>
<div class="custom-modal" *ngIf="showNoteModal"  (click)="closenoterDialogModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">


    <!-- Your preview content (template or component) -->
    <ng-template [ngTemplateOutlet]="myPreviewTemp"></ng-template>
  </div>
</div>

<div class="custom-modal" *ngIf="showNoteupdateModal"  (click)="closenoterDialogUpdateModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">


    <!-- Your preview content (template or component) -->
    <ng-template [ngTemplateOutlet]="myPreviewUpdateTemp"></ng-template>
  </div>
</div>
<div class="custom-modal" *ngIf="showProgramRenewModal"  >
  <div class="modal-content" (click)="$event.stopPropagation()">


    <!-- Your preview content (template or component) -->
    <ng-template [ngTemplateOutlet]="programRenew"></ng-template>
  </div>
</div>
<div class="custom-modal" *ngIf="smsdialogpanel"  (click)="closesmsDialogModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">


    <!-- Your preview content (template or component) -->
    <ng-template [ngTemplateOutlet]="messageDialog"></ng-template>
  </div>
</div>
<app-confirm-dialog-panel>
</app-confirm-dialog-panel>