<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

    xmlns:tools="http://schemas.android.com/tools"

    android:layout_width="match_parent"

    android:layout_height="match_parent"

    android:background="@color/background2"

    tools:context="com.rpm.clynx.fragments.MessageActivity">

    <android.widget.Toolbar

        android:id="@+id/toolbar"

        android:layout_width="match_parent"

        android:layout_height="?attr/actionBarSize"

        android:background="@color/profile_card_body_bg"

        android:theme="?attr/actionBarTheme"

        android:minHeight="?attr/actionBarSize"

        android:navigationIcon="@drawable/ic_baseline_west_24">


        <!-- Chat Member Name (Perfect Center) -->
        <TextView

            android:id="@+id/chatMemName"

            android:layout_width="wrap_content"

            android:layout_height="wrap_content"

            android:text="Chats"

            android:textColor="@color/ChatTimeBlack"

            android:textSize="16sp"

            android:textStyle="bold"

            android:layout_gravity="center" />

        <!-- Typing Indicator (Right-Aligned) -->
        <TextView

            android:id="@+id/msgTypingIndicator"

            android:layout_width="wrap_content"

            android:layout_height="wrap_content"

            android:text="Typing..."

            android:textSize="16sp"

            android:textColor="@color/purple_400"

            android:visibility="gone"

            android:layout_gravity="end|center_vertical"

            android:layout_marginEnd="16dp" />


    </android.widget.Toolbar>

    <androidx.recyclerview.widget.RecyclerView

        android:id="@+id/messagesRecyclerView"

        android:scrollbars="vertical"

        android:background="@color/background2"

        android:layout_width="match_parent"

        android:layout_height="match_parent"

        android:layout_below="@id/toolbar"

        android:layout_marginBottom="50dp"

        android:paddingLeft="@dimen/activity_horizontal_margin"

        android:paddingRight="@dimen/activity_horizontal_margin"

        android:paddingBottom="@dimen/margin_bottom_10dp"

        />

    <!-- Overlay layout for ProgressBar, scrollToLatestButton, and newMessageNotification -->
    <RelativeLayout

        android:layout_width="match_parent"

        android:layout_height="match_parent">

        <ProgressBar

            android:id="@+id/progressMessage"

            android:layout_width="match_parent"

            android:layout_height="wrap_content"

            android:layout_centerInParent="true"

            android:background="@color/background2"

            android:visibility="visible" />

        <!-- Existing layout code above -->

        <ImageButton

            android:id="@+id/scrollToLatestButton"

            android:layout_width="wrap_content"

            android:layout_height="wrap_content"

            android:layout_alignParentEnd="true"

            android:background="@color/background2"

            android:layout_alignParentBottom="true"

            android:layout_marginEnd="30dp"

            android:layout_marginRight="65dp"

            android:layout_marginBottom="70dp"

            android:src="@drawable/icons_chevron_down"

            android:visibility="gone" />

        <!-- Existing layout code below -->


        <!-- Modify the attributes of newMessageNotification for the desired alignment -->
        <TextView

            android:id="@+id/newMessageNotification"

            android:layout_width="wrap_content"

            android:layout_height="wrap_content"

            android:layout_alignParentEnd="true"

            android:layout_alignParentBottom="true"

            android:layout_marginEnd="16dp"

            android:layout_marginRight="60dp"

            android:layout_marginBottom="70dp"

            android:background="@color/Primary_dark"

            android:padding="5dp"

            android:text=" â†“ New Message"

            android:textColor="#FFFFFF"

            android:textSize="16sp"

            android:visibility="gone" />


        <LinearLayout

            android:layout_width="match_parent"

            android:layout_height="wrap_content"

            android:layout_alignParentBottom="true"

            android:background="@color/background3"

            android:orientation="horizontal"

            android:gravity="center_vertical"

            android:paddingLeft="@dimen/activity_horizontal_margin"

            android:paddingTop="12dp"

            android:paddingRight="@dimen/activity_horizontal_margin"

            android:paddingBottom="12dp">

            <EditText

                android:id="@+id/writeMessageEditText"

                android:layout_width="0dp"

                android:layout_height="wrap_content"

                android:layout_weight="10"

                android:hint="@string/write_message"

                android:inputType="textMultiLine|textCapSentences"

                android:gravity="top|start"

                android:minLines="1"

                android:maxLines="5"

                android:textColor="@color/black"

                android:background="@drawable/edit_text_rounded_bg"

                android:backgroundTint="@null"

                android:paddingTop="12dp"

                android:paddingBottom="12dp"

                android:scrollbars="vertical"

                android:overScrollMode="always"/>


            <ImageView

                android:id="@+id/sendChatMessageButton"

                android:layout_width="wrap_content"

                android:layout_height="50dp"

                android:background="@drawable/ripple_with_bg"

                android:padding="10dp"

                android:src="@drawable/icons_send"

                android:clickable="true"

                android:focusable="true"/>
        </LinearLayout>
    </RelativeLayout>
</RelativeLayout>

